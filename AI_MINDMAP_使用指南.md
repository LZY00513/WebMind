# 🤖 AI 智能思维导图 - 使用指南

## 📖 功能介绍

WebMind 现在使用 **Chrome 内置 AI (Gemini Nano)** 自动为你的笔记生成智能思维导图！

### 🆕 新功能亮点

1. **AI 主题提取** - 不再是简单的词频统计，而是真正理解笔记内容
2. **语义连接** - 基于内容相似度自动建立知识关联
3. **实时状态** - 可视化显示 AI 模型状态和构建进度
4. **智能降级** - AI 不可用时自动使用传统算法

---

## 🚀 快速开始

### 步骤 1: 确认 AI 可用

1. 打开扩展的 **Popup** 窗口
2. 查看 "Chrome AI 状态"：
   - ✅ **可用** → 可以使用 AI 思维导图
   - ⬇️ **需要下载** → 需要先下载 Gemini Nano 模型
   - ⏳ **下载中** → 等待模型下载完成
   - ❌ **不可用** → 将使用传统算法

### 步骤 2: 添加笔记

1. 在任意网页选中文字
2. 点击 "添加到笔记" 按钮
3. 等待 AI 自动生成摘要
4. 重复添加 3-5 条相关主题的笔记

### 步骤 3: 查看思维导图

1. 打开扩展的 **侧边栏** (SidePanel)
2. 切换到 "🧠 思维导图" 标签
3. 等待 AI 自动构建（首次可能需要 2-5 秒）
4. 查看顶部的状态提示

---

## 🎨 界面说明

### 状态指示器

思维导图顶部会显示 AI 状态：

```
💡 拖动节点可以调整布局，滚轮缩放查看细节

✅ Chrome 内置 AI 可用，将生成智能思维导图

🤖 正在使用 AI 构建思维导图...
```

### 节点类型

**AI 模式（推荐）:**
- 节点 = AI 提取的主题句
- 示例: "Machine learning trains models with data"

**传统模式（降级）:**
- 节点 = 高频关键词
- 示例: "learning", "data", "model"

### 连线含义

- **粗线** → 高度相关（相似度 > 50%）
- **细线** → 一般相关（相似度 15-50%）
- **无连线** → 主题不相关

---

## 🔍 控制台日志详解

打开浏览器控制台 (F12)，你会看到详细的构建日志：

### 1. 初始化阶段

```
[AI Mindmap] 🚀 开始构建思维导图，笔记数量: 5
[AI Mindmap] 📊 Summarizer 状态: available
[AI Mindmap] 🤖 使用 AI Summarizer 构建
[AI Mindmap] ✅ Summarizer 创建成功
```

**解释:**
- 检测到 5 条笔记
- AI 模型可用
- 开始使用 AI 构建

### 2. 摘要生成阶段

```
[AI Mindmap] 📝 处理笔记: 1761...
[AI Mindmap] ✅ 摘要生成: "AI simulates human intelligence..."
[AI Mindmap] 📝 处理笔记: 1762...
[AI Mindmap] ✅ 摘要生成: "Machine learning trains models..."
```

**解释:**
- 为每条笔记调用 AI Summarizer
- 提取核心主题描述

### 3. 连接构建阶段

```
[AI Mindmap] 🔗 连接: AI simulates ↔ Machine learning (相似度: 28.5%)
[AI Mindmap] 🔗 连接: Machine learning ↔ Deep learning (相似度: 35.2%)
```

**解释:**
- 计算笔记间的语义相似度
- 相似度 > 15% 时创建连接

### 4. 完成阶段

```
[AI Mindmap] 🧹 Summarizer 资源已释放
[AI Mindmap] 📊 节点数量: 5
[AI Mindmap] 🔗 连线数量: 3
[AI Mindmap] ✅ AI 思维导图构建完成
```

**解释:**
- 清理 AI 资源
- 生成了 5 个节点，3 条连线

---

## 🧠 AI vs 传统算法对比

### 真实案例

假设有 3 条关于 AI 的笔记：

**笔记 1:**
> "人工智能是计算机科学的一个分支，研究如何让机器模拟人类智能。"

**笔记 2:**
> "机器学习是人工智能的核心技术，通过数据训练模型。"

**笔记 3:**
> "深度学习使用神经网络处理复杂的模式识别任务。"

---

### 传统算法结果

**节点 (关键词):**
```
人工智能  机器  学习  数据  深度
```

**连线:**
```
人工智能 ←→ 机器 (共现在笔记1)
人工智能 ←→ 学习 (共现在笔记1、2)
```

**问题:**
- ❌ 单个词汇，缺乏上下文
- ❌ 难以理解笔记的真实主题
- ❌ 连线基于简单共现，不够智能

---

### AI 算法结果

**节点 (AI 主题):**
```
节点1: "AI simulates human intelligence"
节点2: "Machine learning trains models with data"
节点3: "Deep learning uses neural networks"
```

**连线:**
```
节点1 ←→ 节点2 (相似度: 28% - 都提到 AI/ML)
节点2 ←→ 节点3 (相似度: 35% - 都提到 learning)
节点1 ←→ 节点3 (相似度: 18% - 都属于 AI 领域)
```

**优势:**
- ✅ 完整句子，清晰表达主题
- ✅ 语义理解，智能建立关联
- ✅ 一目了然，快速把握知识结构

---

## 🛠️ 常见问题

### Q1: 为什么显示 "AI 模型不可用"？

**可能原因:**
1. Chrome 版本过低（需要 Chrome 129+）
2. Gemini Nano 未下载
3. 设备不支持（内存/存储不足）

**解决方法:**
1. 更新 Chrome 到最新版本
2. 前往 `chrome://flags/#optimization-guide-on-device-model`
3. 设置为 "Enabled BypassPerfRequirement"
4. 重启浏览器

### Q2: AI 模型下载需要多久？

**下载时间:**
- 模型大小: ~1.7 GB
- 快速网络: 5-10 分钟
- 普通网络: 15-30 分钟

**下载进度:**
- 在控制台查看: `📥 已下载 45%`
- 下载完成后自动可用

### Q3: 为什么有些节点是英文？

**原因:**
Chrome Gemini Nano 目前仅支持：
- ✅ 英语 (en)
- ✅ 西班牙语 (es)
- ✅ 日语 (ja)
- ❌ 中文 (zh) - 暂不支持

**影响:**
- AI 会将中文笔记提取为英文主题
- 不影响语义理解和连接质量

**未来:**
Google 计划在后续版本中加入中文支持

### Q4: AI 构建失败怎么办？

**自动降级:**
系统会自动使用传统词频算法，仍然可以生成思维导图

**日志提示:**
```
[AI Mindmap] ❌ AI 构建失败，使用降级方案
[AI Mindmap] 📋 使用降级方案（词频统计）
```

**手动操作:**
1. 刷新页面重试
2. 检查控制台错误信息
3. 确认 AI 模型状态

### Q5: 如何提高思维导图质量？

**最佳实践:**

1. **笔记质量**
   - ✅ 完整句子，清晰表达观点
   - ✅ 每条笔记聚焦一个主题
   - ❌ 避免过短片段（< 20 字）

2. **笔记数量**
   - ✅ 3-10 条笔记效果最佳
   - ⚠️ < 3 条可能连接不足
   - ⚠️ > 20 条可能过于复杂

3. **主题相关性**
   - ✅ 选择相关领域的笔记
   - ✅ 例如: 都是关于 "机器学习" 的内容
   - ❌ 避免完全无关的笔记混在一起

4. **定期清理**
   - 删除不相关的旧笔记
   - 保持知识库聚焦

---

## 🔬 技术原理（给开发者）

### Jaccard 相似度计算

```typescript
// 1. 分词
words1 = ["machine", "learning", "trains", "models"]
words2 = ["deep", "learning", "neural", "networks"]

// 2. 求交集
intersection = ["learning"]  // 1 个词

// 3. 求并集
union = ["machine", "learning", "trains", "models", "deep", "neural", "networks"]  // 7 个词

// 4. 计算相似度
similarity = 1 / 7 ≈ 14.3%

// 5. 判断阈值
if (similarity > 0.15) {
  // 创建连接
}
```

### 停用词过滤

**目的:** 过滤无意义的常见词，提高相似度准确性

**示例:**

```typescript
原文: "The AI is learning from the data"
分词: ["the", "ai", "is", "learning", "from", "the", "data"]
过滤: ["ai", "learning", "data"]  // 移除 the, is, from
```

**停用词表:**
- 英文: the, a, an, is, was, are, this, that...
- 中文: 的、了、在、是、我、有、和...

---

## 📊 性能数据

| 指标 | 传统算法 | AI 算法 | 说明 |
|------|---------|---------|------|
| 构建速度 | ~50ms | ~2000ms | AI 需要调用模型 |
| 节点质量 | ⭐⭐ | ⭐⭐⭐⭐⭐ | 完整主题 vs 单词 |
| 连接准确性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 语义相似 vs 共现 |
| 语义理解 | ❌ | ✅ | AI 真正理解内容 |
| 网络依赖 | 无 | 无 | 完全本地处理 |
| 隐私安全 | ✅ | ✅ | 数据不离开设备 |

---

## 🎯 使用建议

### 场景 1: 学习笔记整理

**步骤:**
1. 阅读文章/视频时，选中关键段落
2. 添加到 WebMind
3. 查看思维导图，发现知识关联
4. 点击节点查看原文

**效果:**
- 快速建立知识网络
- 发现主题间的联系
- 复习时一目了然

### 场景 2: 研究资料管理

**步骤:**
1. 收集多篇相关论文/博客
2. 为每篇提取核心观点
3. 生成跨文档的知识图谱
4. 导出思维导图分享

**效果:**
- 跨文档知识关联
- 发现研究热点
- 形成自己的理解

### 场景 3: 项目知识库

**步骤:**
1. 团队成员添加项目相关笔记
2. 自动生成项目知识图谱
3. 新人快速了解项目架构
4. 发现知识盲点

**效果:**
- 团队知识共享
- 新人快速上手
- 持续知识沉淀

---

## 📝 反馈与改进

### 当前已知限制

1. **语言支持** - 暂不支持中文输出
2. **构建速度** - 首次需要下载模型
3. **节点数量** - 过多笔记可能渲染慢

### 未来计划

- [ ] 支持中文输出（等待 Chrome 更新）
- [ ] 支持节点分组聚类
- [ ] 支持导出为图片/PDF
- [ ] 支持手动调整节点关系

---

**最后更新:** 2025-10-23  
**版本:** 2.0.0  
**技术支持:** WebMind Team

