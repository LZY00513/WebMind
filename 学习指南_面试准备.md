# ğŸ“ WebMind é¡¹ç›®å­¦ä¹ æŒ‡å—ä¸é¢è¯•å‡†å¤‡

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
2. [æ ¸å¿ƒæŠ€æœ¯æ ˆ](#æ ¸å¿ƒæŠ€æœ¯æ ˆ)
3. [å¼€å‘é¡ºåºè¯¦è§£](#å¼€å‘é¡ºåºè¯¦è§£)
4. [é¢è¯•è®²è§£ç­–ç•¥](#é¢è¯•è®²è§£ç­–ç•¥)
5. [å¸¸è§é¢è¯•é—®é¢˜åŠå›ç­”](#å¸¸è§é¢è¯•é—®é¢˜åŠå›ç­”)
6. [æŠ€æœ¯éš¾ç‚¹æ·±å…¥ç†è§£](#æŠ€æœ¯éš¾ç‚¹æ·±å…¥ç†è§£)
7. [é¡¹ç›®äº®ç‚¹æ€»ç»“](#é¡¹ç›®äº®ç‚¹æ€»ç»“)

---

## é¡¹ç›®æ¦‚è§ˆ

### è¿™æ˜¯ä»€ä¹ˆé¡¹ç›®ï¼Ÿ

**WebMind** æ˜¯ä¸€ä¸ª Chrome æµè§ˆå™¨æ‰©å±•ï¼Œå®ƒç»“åˆäº†ï¼š
- âœ… AI æ™ºèƒ½æ‘˜è¦ï¼ˆä½¿ç”¨ Chrome å†…ç½®çš„ Gemini Nanoï¼‰
- âœ… æœ¬åœ°ç¬”è®°ç®¡ç†ç³»ç»Ÿ
- âœ… åŸºäº D3.js çš„æ€ç»´å¯¼å›¾å¯è§†åŒ–
- âœ… å®Œå…¨ç¦»çº¿å·¥ä½œï¼Œä¿æŠ¤ç”¨æˆ·éšç§

### æ ¸å¿ƒåŠŸèƒ½æµç¨‹

```
ç”¨æˆ·é€‰ä¸­ç½‘é¡µæ–‡å­— 
    â†“
ç‚¹å‡»ã€Œç”¨ AI æ€»ç»“ã€æŒ‰é’®
    â†“
è°ƒç”¨ Chrome Built-in AI ç”Ÿæˆæ‘˜è¦
    â†“
è‡ªåŠ¨ä¿å­˜ä¸ºç¬”è®°ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
    â†“
åœ¨ä¾§è¾¹æ æŸ¥çœ‹æ‰€æœ‰ç¬”è®°
    â†“
è‡ªåŠ¨ç”Ÿæˆæ€ç»´å¯¼å›¾ï¼ˆD3.js å¯è§†åŒ–ï¼‰
```

---

## æ ¸å¿ƒæŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18.2.0 | UI æ¡†æ¶ |
| TypeScript | 5.3.3 | ç±»å‹å®‰å…¨ |
| Zustand | 4.4.7 | çŠ¶æ€ç®¡ç† |
| D3.js | 7.8.5 | æ€ç»´å¯¼å›¾å¯è§†åŒ– |
| Vite | 5.0.8 | æ„å»ºå·¥å…· |

### Chrome æ‰©å±•æŠ€æœ¯
- Manifest V3ï¼ˆæœ€æ–°è§„èŒƒï¼‰
- Service Workerï¼ˆåå°å¤„ç†ï¼‰
- Content Scriptsï¼ˆé¡µé¢æ³¨å…¥ï¼‰
- Chrome Storage APIï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰
- Side Panel APIï¼ˆä¾§è¾¹æ ï¼‰
- Offscreen Documentï¼ˆAI è°ƒç”¨ä»£ç†ï¼‰

### AI æŠ€æœ¯
- Chrome Built-in AIï¼ˆGemini Nanoï¼‰
- Summarizer APIï¼ˆæ–‡æœ¬æ‘˜è¦ï¼‰

---

## å¼€å‘é¡ºåºè¯¦è§£

> **é¢è¯•é‡ç‚¹**ï¼šå¼€å‘é¡ºåºä½“ç°äº†ä½ çš„å·¥ç¨‹æ€ç»´å’Œæ¶æ„èƒ½åŠ›

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»ºï¼ˆ1-2å¤©ï¼‰

#### 1. åˆå§‹åŒ–é¡¹ç›®
```bash
npm create vite@latest webmind -- --template react-ts
cd webmind
npm install
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘é¦–å…ˆé€‰æ‹©äº† Vite ä½œä¸ºæ„å»ºå·¥å…·ï¼Œå› ä¸ºå®ƒæ¯” Webpack å¿«å¾ˆå¤šï¼Œå¯¹ TypeScript æ”¯æŒä¹Ÿæ›´å¥½ã€‚è¿™ä¸ªå†³ç­–ä¸ºåç»­çš„å¼€å‘ä½“éªŒæ‰“ä¸‹äº†å¾ˆå¥½çš„åŸºç¡€ã€‚"

#### 2. é…ç½® Chrome æ‰©å±•åŸºç¡€
åˆ›å»º `manifest.json`ï¼š
```json
{
  "manifest_version": 3,
  "name": "WebMind",
  "version": "1.0.0",
  "permissions": ["storage", "sidePanel", "activeTab", "offscreen", "tabs"]
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘ä½¿ç”¨äº† Manifest V3ï¼Œè™½ç„¶å®ƒæ¯” V2 å¤æ‚ï¼Œä½†è¿™æ˜¯ Chrome çš„æœ€æ–°æ ‡å‡†ã€‚V3 å¼ºåˆ¶ä½¿ç”¨ Service Worker æ›¿ä»£ background pageï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ¶æ„å˜åŒ–ã€‚"

#### 3. è®¾ç½® TypeScript ç±»å‹ç³»ç»Ÿ
åˆ›å»º `src/shared/types.ts`ï¼š
```typescript
export interface Note {
  id: string;
  content: string;
  summary?: string;
  url: string;
  title: string;
  timestamp: number;
  status: 'pending' | 'summarized' | 'connected';
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘ä»ä¸€å¼€å§‹å°±å®šä¹‰äº†å®Œæ•´çš„ç±»å‹ç³»ç»Ÿï¼Œè¿™è®©æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­éƒ½æœ‰ç±»å‹æ£€æŸ¥ä¿æŠ¤ï¼Œé¿å…äº†å¾ˆå¤šæ½œåœ¨çš„ bugã€‚"

#### 4. é…ç½® Vite æ„å»ºå¤šå…¥å£
ä¿®æ”¹ `vite.config.ts`ï¼š
- åˆ†åˆ«æ„å»º popupã€sidepanelã€backgroundã€content
- å¤„ç† CSS æ–‡ä»¶åˆ†ç¦»
- å¤åˆ¶ manifest.json

**é¢è¯•è¯æœ¯**ï¼š
> "Chrome æ‰©å±•æœ‰å¤šä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œæˆ‘é…ç½®äº†å¤šå…¥å£æ„å»ºï¼Œæ¯ä¸ªéƒ¨åˆ†ç‹¬ç«‹æ‰“åŒ…ï¼Œè¿™æ ·å¯ä»¥åšåˆ°æŒ‰éœ€åŠ è½½ï¼Œå‡å°ä½“ç§¯ã€‚"

---

### ç¬¬äºŒé˜¶æ®µï¼šContent Script å¼€å‘ï¼ˆ1å¤©ï¼‰

#### 5. å®ç°æ–‡æœ¬é€‰æ‹©ç›‘å¬
`src/content/content.ts` æ ¸å¿ƒé€»è¾‘ï¼š

```typescript
// ç›‘å¬æ–‡æœ¬é€‰æ‹©
document.addEventListener('mouseup', () => {
  const selection = window.getSelection();
  const selectedText = selection?.toString().trim();
  
  if (selectedText && selectedText.length > 10) {
    showSummarizeButton();
  }
});
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªæŠ€æœ¯æŒ‘æˆ˜æ˜¯å¦‚ä½•ä¼˜é›…åœ°æ£€æµ‹ç”¨æˆ·çš„æ–‡æœ¬é€‰æ‹©ã€‚æˆ‘ä½¿ç”¨äº† mouseup äº‹ä»¶ç»“åˆ window.getSelection()ï¼Œå¹¶ä¸”åŠ äº†é˜²æŠ–ä¼˜åŒ–ï¼Œé¿å…é¢‘ç¹è§¦å‘ã€‚"

#### 6. åˆ›å»ºæµ®åŠ¨æŒ‰é’® UI
`src/content/content.css`ï¼š
```css
.webmind-floating-button {
  position: absolute;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  transition: all 0.3s ease;
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘è®¾è®¡äº†ä¸€ä¸ªæ¸å˜ç´«è‰²çš„æµ®åŠ¨æŒ‰é’®ï¼Œä½¿ç”¨äº†æ¯›ç»ç’ƒæ•ˆæœå’Œé˜´å½±ï¼Œè®©å®ƒåœ¨ä»»ä½•ç½‘é¡µä¸Šéƒ½èƒ½é†’ç›®ä½†ä¸çªå…€ã€‚è¿™ä¸ªè®¾è®¡æ˜¯å—åˆ°äº† Notion å’Œ Arc æµè§ˆå™¨çš„å¯å‘ã€‚"

#### 7. å®ç°æ¶ˆæ¯å‘é€
```typescript
chrome.runtime.sendMessage({
  type: MessageType.COLLECT_TEXT,
  payload: { text: selectedText, url, title }
});
```

**é¢è¯•è¯æœ¯**ï¼š
> "Content Script å’Œ Background ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡ Chrome çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶å®ç°çš„ã€‚æˆ‘è®¾è®¡äº†ä¸€å¥—æ¶ˆæ¯ç±»å‹æšä¸¾ï¼Œè®©é€šä¿¡æ›´åŠ ç±»å‹å®‰å…¨ã€‚"

---

### ç¬¬ä¸‰é˜¶æ®µï¼šBackground Service Workerï¼ˆ2å¤©ï¼‰

#### 8. æ­å»ºæ¶ˆæ¯è·¯ç”±ç³»ç»Ÿ
`src/background/service-worker.ts`ï¼š
```typescript
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
  switch (message.type) {
    case MessageType.COLLECT_TEXT:
      handleCollectText(message.payload)
        .then(sendResponse);
      return true; // ä¿æŒæ¶ˆæ¯é€šé“å¼€å¯
  }
});
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘å®ç°äº†ä¸€ä¸ªæ¶ˆæ¯è·¯ç”±ç³»ç»Ÿï¼Œæ‰€æœ‰çš„æ¶ˆæ¯éƒ½é€šè¿‡ Background ä¸­è½¬ã€‚è¿™é‡Œæœ‰ä¸ªå‘ï¼šå¿…é¡» return true æ‰èƒ½ä¿æŒå¼‚æ­¥å“åº”é€šé“ï¼Œå¦åˆ™ sendResponse ä¼šå¤±æ•ˆã€‚"

#### 9. å®ç°å­˜å‚¨å±‚å°è£…
`src/shared/utils/storage.ts`ï¼š
```typescript
export async function saveNote(note: Note): Promise<void> {
  const notes = await getAllNotes();
  notes.unshift(note);
  await chrome.storage.local.set({ webmind_notes: notes });
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘å°è£…äº†ä¸€å¥—å­˜å‚¨å·¥å…·å‡½æ•°ï¼Œä½¿ç”¨ Chrome Storage APIã€‚é€‰æ‹© local è€Œä¸æ˜¯ syncï¼Œæ˜¯å› ä¸ºç¬”è®°å†…å®¹å¯èƒ½å¾ˆå¤§ï¼Œè€Œä¸”ç”¨æˆ·çš„éšç§æ•°æ®ä¸åº”è¯¥åŒæ­¥åˆ°äº‘ç«¯ã€‚"

#### 10. å¤„ç† Offscreen Documentï¼ˆæ ¸å¿ƒéš¾ç‚¹ï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦ Offscreen Documentï¼Ÿ**
- Chrome Built-in AI åªèƒ½åœ¨é¡µé¢ä¸Šä¸‹æ–‡ï¼ˆæœ‰ DOMï¼‰ä¸­è°ƒç”¨
- Service Worker æ²¡æœ‰ DOM ç¯å¢ƒ
- è§£å†³æ–¹æ¡ˆï¼šåˆ›å»ºä¸€ä¸ªä¸å¯è§çš„é¡µé¢ä½œä¸ºä»£ç†

```typescript
// åˆ›å»º Offscreen Document
await chrome.offscreen.createDocument({
  url: 'background/offscreen.html',
  reasons: ['DOM_SCRAPING'],
  justification: 'ä½¿ç”¨ Chrome Built-in AI ç”Ÿæˆæ‘˜è¦'
});

// å‘é€æ¶ˆæ¯åˆ° Offscreen
const response = await chrome.runtime.sendMessage({ 
  type: 'AI_SUMMARIZE', 
  payload: { text } 
});
```

**é¢è¯•è¯æœ¯ï¼ˆé‡ç‚¹ï¼‰**ï¼š
> "è¿™æ˜¯æ•´ä¸ªé¡¹ç›®æœ€æ ¸å¿ƒçš„æŠ€æœ¯éš¾ç‚¹ã€‚Chrome Built-in AI åªèƒ½åœ¨æœ‰ DOM çš„ç¯å¢ƒä¸­è°ƒç”¨ï¼Œä½† Manifest V3 å¼ºåˆ¶ä½¿ç”¨ Service Workerï¼Œå®ƒæ²¡æœ‰ DOMã€‚æˆ‘ç ”ç©¶äº† Chrome çš„æ–‡æ¡£ï¼Œå‘ç°å¯ä»¥ç”¨ Offscreen Document ä½œä¸ºä»£ç†ã€‚
> 
> å…·ä½“å®ç°æ˜¯ï¼šBackground Worker åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ HTML é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢ä¸­è°ƒç”¨ AI APIï¼Œç„¶åé€šè¿‡æ¶ˆæ¯ä¼ é€’æŠŠç»“æœè¿”å›ã€‚è¿™ä¸ªæ–¹æ¡ˆæ—¢ç¬¦åˆ V3 è§„èŒƒï¼Œåˆè§£å†³äº† AI è°ƒç”¨çš„é™åˆ¶ã€‚
> 
> æˆ‘è¿˜åšäº†ä¼˜åŒ–ï¼šå¤ç”¨å·²åˆ›å»ºçš„ Offscreen Documentï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯ã€‚"

---

### ç¬¬å››é˜¶æ®µï¼šOffscreen Document å®ç°ï¼ˆ1å¤©ï¼‰

#### 11. åˆ›å»º Offscreen é¡µé¢
`src/background/offscreen.ts`ï¼š
```typescript
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.type === 'AI_SUMMARIZE') {
    summarizeWithAI(message.payload.text)
      .then(summary => sendResponse({ summary }))
      .catch(error => sendResponse({ error: error.message }));
    return true;
  }
});

async function summarizeWithAI(text: string): Promise<string> {
  const summarizer = await window.ai.summarizer.create({
    type: 'tldr',
    format: 'plain-text',
    length: 'medium'
  });
  
  const summary = await summarizer.summarize(text);
  summarizer.destroy();
  return summary;
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "åœ¨ Offscreen é¡µé¢ä¸­ï¼Œæˆ‘è°ƒç”¨äº† window.ai.summarizer APIã€‚è¿™æ˜¯ Chrome 127+ ç‰ˆæœ¬æä¾›çš„å®éªŒæ€§ APIï¼Œç›®å‰åªæ”¯æŒè‹±è¯­ã€è¥¿ç­ç‰™è¯­å’Œæ—¥è¯­ã€‚
> 
> æˆ‘è®¾ç½®äº†ä¸‰ä¸ªå‚æ•°ï¼štype ä¸º 'tldr'ï¼ˆæ€»ç»“å¼ï¼‰ï¼Œformat ä¸ºçº¯æ–‡æœ¬ï¼Œlength ä¸ºä¸­ç­‰é•¿åº¦ã€‚ç”¨å®Œåè¦è°ƒç”¨ destroy() é‡Šæ”¾èµ„æºã€‚"

#### 12. å®ç°é™çº§æ–¹æ¡ˆ
```typescript
function generateSimpleSummary(text: string): string {
  const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
  return sentences.slice(0, 3).join(' ');
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "è€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½æ²¡æœ‰å¯ç”¨ AI åŠŸèƒ½ï¼Œæˆ–è€… AI è°ƒç”¨å¤±è´¥ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªé™çº§æ–¹æ¡ˆï¼šç®€å•æå–å‰å‡ å¥è¯ä½œä¸ºæ‘˜è¦ã€‚è¿™ä¿è¯äº†åŠŸèƒ½çš„åŸºæœ¬å¯ç”¨æ€§ã€‚"

---

### ç¬¬äº”é˜¶æ®µï¼šPopup ç•Œé¢ï¼ˆ1å¤©ï¼‰

#### 13. åˆ›å»º Popup ç»„ä»¶
`src/popup/Popup.tsx`ï¼š
```typescript
export default function Popup() {
  const [notes, setNotes] = useState<Note[]>([]);
  
  useEffect(() => {
    chrome.runtime.sendMessage({ type: MessageType.GET_NOTES })
      .then(response => setNotes(response.notes.slice(0, 3)));
  }, []);
  
  return (
    <div className="popup-container">
      <h1>WebMind</h1>
      {notes.map(note => <NoteCard key={note.id} note={note} />)}
    </div>
  );
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "Popup æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ React åº”ç”¨ï¼Œæ¯æ¬¡æ‰“å¼€éƒ½ä¼šé‡æ–°åŠ è½½ã€‚æˆ‘åªå±•ç¤ºæœ€è¿‘ 3 æ¡ç¬”è®°ï¼Œä¿æŒç•Œé¢ç®€æ´å’ŒåŠ è½½é€Ÿåº¦ã€‚ç‚¹å‡»'æŸ¥çœ‹å…¨éƒ¨'å¯ä»¥æ‰“å¼€ä¾§è¾¹æ ã€‚"

#### 14. è®¾è®¡æ¸å˜ UI
`src/popup/popup.css`ï¼š
```css
.popup-container {
  width: 400px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘ä½¿ç”¨äº†ç´«è‰²æ¸å˜ä½œä¸ºä¸»é¢˜è‰²ï¼Œç´«è‰²ä»£è¡¨æ™ºèƒ½å’Œåˆ›æ–°ã€‚æ•´ä¸ª UI æ²¡æœ‰ä½¿ç”¨ä»»ä½• UI æ¡†æ¶ï¼Œéƒ½æ˜¯æ‰‹å†™ CSSï¼Œè¿™æ ·å¯ä»¥å®Œå…¨æ§åˆ¶æ ·å¼ç»†èŠ‚ã€‚"

---

### ç¬¬å…­é˜¶æ®µï¼šSide Panel å¼€å‘ï¼ˆ2å¤©ï¼‰

#### 15. å®ç°çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
`src/shared/store.ts`ï¼š
```typescript
import create from 'zustand';

const useStore = create<AppState>((set) => ({
  notes: [],
  loading: false,
  
  loadNotes: async () => {
    set({ loading: true });
    const response = await chrome.runtime.sendMessage({ 
      type: MessageType.GET_NOTES 
    });
    set({ notes: response.notes, loading: false });
  },
  
  deleteNote: async (id: string) => {
    await chrome.runtime.sendMessage({ 
      type: MessageType.DELETE_NOTE, 
      payload: { id } 
    });
    set(state => ({ 
      notes: state.notes.filter(n => n.id !== id) 
    }));
  }
}));
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘é€‰æ‹© Zustand åšçŠ¶æ€ç®¡ç†ï¼Œè€Œä¸æ˜¯ Redux æˆ– Context APIã€‚ç†ç”±ï¼š
> 1. Zustand æ¯” Redux è½»é‡ 10 å€ï¼ˆåªæœ‰ 1KBï¼‰
> 2. API æ›´ç®€æ´ï¼Œä¸éœ€è¦ Provider åŒ…è£¹
> 3. æ€§èƒ½æ›´å¥½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
> 4. TypeScript æ”¯æŒéå¸¸å¥½"

#### 16. å®ç°ç¬”è®°åˆ—è¡¨è§†å›¾
`src/sidepanel/SidePanel.tsx`ï¼š
```typescript
function SidePanel() {
  const { notes, loadNotes, deleteNote } = useStore();
  const [searchQuery, setSearchQuery] = useState('');
  
  const filteredNotes = notes.filter(note =>
    note.summary?.toLowerCase().includes(searchQuery.toLowerCase())
  );
  
  return (
    <div className="sidepanel">
      <input 
        type="search" 
        placeholder="æœç´¢ç¬”è®°..."
        onChange={e => setSearchQuery(e.target.value)}
      />
      <div className="notes-grid">
        {filteredNotes.map(note => (
          <NoteCard key={note.id} note={note} onDelete={deleteNote} />
        ))}
      </div>
    </div>
  );
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "ä¾§è¾¹æ åˆ†ä¸ºä¸¤ä¸ªæ ‡ç­¾é¡µï¼šç¬”è®°åˆ—è¡¨å’Œæ€ç»´å¯¼å›¾ã€‚ç¬”è®°åˆ—è¡¨ç”¨ç½‘æ ¼å¸ƒå±€ï¼Œæ”¯æŒå®æ—¶æœç´¢è¿‡æ»¤ï¼Œç‚¹å‡»ç¬”è®°å¯ä»¥æŸ¥çœ‹è¯¦æƒ…ã€‚"

---

### ç¬¬ä¸ƒé˜¶æ®µï¼šæ€ç»´å¯¼å›¾å®ç°ï¼ˆ2-3å¤©ï¼Œæœ€å¤æ‚ï¼‰

#### 17. D3.js æ•°æ®å‡†å¤‡
`src/sidepanel/MindMap.tsx`ï¼š
```typescript
// æ­¥éª¤ 1ï¼šæå–å…³é”®è¯
function extractKeywords(text: string): string[] {
  const words = text.toLowerCase().split(/\s+/);
  const wordCount = new Map<string, number>();
  
  words.forEach(word => {
    if (word.length > 4) {
      wordCount.set(word, (wordCount.get(word) || 0) + 1);
    }
  });
  
  return Array.from(wordCount.entries())
    .sort((a, b) => b[1] - a[1])
    .slice(0, 5)
    .map(([word]) => word);
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æ€ç»´å¯¼å›¾çš„æ•°æ®å‡†å¤‡åˆ†ä¸‰æ­¥ï¼š
> 1. ä»æ¯æ¡ç¬”è®°ä¸­æå–å…³é”®è¯ï¼ˆè¿‡æ»¤çŸ­è¯ï¼Œç»Ÿè®¡è¯é¢‘ï¼Œå–å‰5ä¸ªï¼‰
> 2. æ„å»ºèŠ‚ç‚¹ï¼ˆæ¯ä¸ªå…³é”®è¯ä¸€ä¸ªèŠ‚ç‚¹ï¼‰
> 3. æ„å»ºè¿çº¿ï¼ˆå¦‚æœä¸¤ä¸ªå…³é”®è¯å‡ºç°åœ¨åŒä¸€ç¬”è®°ä¸­ï¼Œå°±è¿ä¸€æ¡çº¿ï¼‰"

#### 18. D3.js åŠ›å¯¼å‘å¸ƒå±€
```typescript
// æ­¥éª¤ 2ï¼šåˆ›å»ºåŠ›å¯¼å‘å›¾
const simulation = d3.forceSimulation(nodes)
  .force('link', d3.forceLink(links).distance(150))
  .force('charge', d3.forceManyBody().strength(-500))
  .force('center', d3.forceCenter(width / 2, height / 2))
  .force('collision', d3.forceCollide().radius(60));

simulation.on('tick', () => {
  // æ›´æ–°èŠ‚ç‚¹å’Œè¿çº¿ä½ç½®
  linkElements.attr('x1', d => d.source.x)
              .attr('y1', d => d.source.y)
              .attr('x2', d => d.target.x)
              .attr('y2', d => d.target.y);
              
  nodeElements.attr('cx', d => d.x)
              .attr('cy', d => d.y);
});
```

**é¢è¯•è¯æœ¯ï¼ˆé‡ç‚¹ï¼‰**ï¼š
> "D3.js çš„åŠ›å¯¼å‘å›¾æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š
> 
> **åŠ›çš„ç±»å‹**ï¼š
> 1. **link force**ï¼ˆå¼¹ç°§åŠ›ï¼‰ï¼šæŠŠæœ‰è¿çº¿çš„èŠ‚ç‚¹æ‹‰åˆ°ä¸€èµ·ï¼Œdistance=150 åƒç´ 
> 2. **charge force**ï¼ˆç”µè·åŠ›ï¼‰ï¼šè®©æ‰€æœ‰èŠ‚ç‚¹äº’ç›¸æ’æ–¥ï¼Œstrength=-500ï¼ˆè´Ÿæ•°è¡¨ç¤ºæ’æ–¥ï¼‰
> 3. **center force**ï¼ˆä¸­å¿ƒåŠ›ï¼‰ï¼šæŠŠæ•´ä¸ªå›¾æ‹‰å‘ä¸­å¿ƒç‚¹
> 4. **collision force**ï¼ˆç¢°æ’åŠ›ï¼‰ï¼šé˜²æ­¢èŠ‚ç‚¹é‡å ï¼Œradius=60
> 
> **ç‰©ç†æ¨¡æ‹Ÿ**ï¼š
> D3 ä¼šæ¨¡æ‹Ÿç‰©ç†è¿åŠ¨ï¼Œæ¯ä¸€å¸§ï¼ˆtickï¼‰è®¡ç®—ä¸€æ¬¡èŠ‚ç‚¹ä½ç½®ï¼Œç›´åˆ°è¾¾åˆ°å¹³è¡¡çŠ¶æ€ã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡ tick æ—¶æ›´æ–° SVG å…ƒç´ çš„åæ ‡ã€‚
> 
> **æ€§èƒ½ä¼˜åŒ–**ï¼š
> - é™åˆ¶èŠ‚ç‚¹æ•°é‡ï¼ˆæœ€å¤š50ä¸ªï¼‰
> - è®¾ç½® alphaDecay åŠ å¿«æ”¶æ•›
> - è€ƒè™‘å¤§è§„æ¨¡æ•°æ®æ—¶ç”¨ Canvas æ›¿ä»£ SVG"

#### 19. å®ç°æ‹–æ‹½äº¤äº’
```typescript
const drag = d3.drag()
  .on('start', (event, d) => {
    if (!event.active) simulation.alphaTarget(0.3).restart();
    d.fx = d.x;
    d.fy = d.y;
  })
  .on('drag', (event, d) => {
    d.fx = event.x;
    d.fy = event.y;
  })
  .on('end', (event, d) => {
    if (!event.active) simulation.alphaTarget(0);
    d.fx = null;
    d.fy = null;
  });

nodeElements.call(drag);
```

**é¢è¯•è¯æœ¯**ï¼š
> "æ‹–æ‹½å®ç°åˆ†ä¸‰ä¸ªé˜¶æ®µï¼š
> 1. **start**ï¼šé‡å¯æ¨¡æ‹Ÿï¼Œå›ºå®šèŠ‚ç‚¹ä½ç½®ï¼ˆfx, fyï¼‰
> 2. **drag**ï¼šæ›´æ–°å›ºå®šä½ç½®åˆ°é¼ æ ‡ä½ç½®
> 3. **end**ï¼šé‡Šæ”¾å›ºå®šï¼Œè®©èŠ‚ç‚¹è‡ªç”±ç§»åŠ¨
> 
> alphaTarget(0.3) æ˜¯è®©æ¨¡æ‹Ÿé‡æ–°æ´»è·ƒèµ·æ¥ï¼Œé»˜è®¤çš„ alpha ä¼šé€æ¸è¡°å‡åˆ° 0ã€‚"

#### 20. å®ç°ç¼©æ”¾å’Œå¹³ç§»
```typescript
const zoom = d3.zoom()
  .scaleExtent([0.5, 3])
  .on('zoom', (event) => {
    svg.select('g').attr('transform', event.transform);
  });

svg.call(zoom);
```

**é¢è¯•è¯æœ¯**ï¼š
> "ç¼©æ”¾åŠŸèƒ½ç”¨ D3 çš„ zoom behavior å®ç°ï¼ŒscaleExtent é™åˆ¶ç¼©æ”¾èŒƒå›´åœ¨ 0.5x åˆ° 3x ä¹‹é—´ã€‚æ¯æ¬¡ç¼©æ”¾æ—¶ï¼Œæˆ‘ä»¬æ”¹å˜æ•´ä¸ªå›¾å±‚çš„ transform å±æ€§ã€‚"

---

### ç¬¬å…«é˜¶æ®µï¼šä¼˜åŒ–å’Œæµ‹è¯•ï¼ˆ1-2å¤©ï¼‰

#### 21. æ·»åŠ é”™è¯¯å¤„ç†
```typescript
try {
  const summary = await summarizeWithAI(text);
} catch (error) {
  console.error('AI æ‘˜è¦å¤±è´¥:', error);
  // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
  showNotification('æ‘˜è¦å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
  // ä½¿ç”¨é™çº§æ–¹æ¡ˆ
  return generateSimpleSummary(text);
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘åœ¨æ‰€æœ‰å…³é”®è·¯å¾„ä¸Šéƒ½åŠ äº†é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆï¼Œç¡®ä¿å³ä½¿ AI åŠŸèƒ½ä¸å¯ç”¨ï¼ŒåŸºæœ¬åŠŸèƒ½ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚"

#### 22. æ€§èƒ½ä¼˜åŒ–
- React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- æœç´¢è¾“å…¥é˜²æŠ–ï¼ˆ300msï¼‰
- ç¬”è®°åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆreact-windowï¼‰
- å›¾ç‰‡æ‡’åŠ è½½

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘åšäº†å‡ é¡¹æ€§èƒ½ä¼˜åŒ–ï¼š
> 1. ç”¨ React.memo åŒ…è£¹ç¬”è®°å¡ç‰‡ç»„ä»¶
> 2. æœç´¢è¾“å…¥åŠ äº† 300ms é˜²æŠ–
> 3. è€ƒè™‘åˆ°å¯èƒ½æœ‰æˆç™¾ä¸Šåƒæ¡ç¬”è®°ï¼Œæˆ‘å‡†å¤‡å¼•å…¥è™šæ‹Ÿæ»šåŠ¨"

#### 23. æµ‹è¯•
- æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- åœ¨ä¸åŒç½‘ç«™æµ‹è¯•ï¼ˆå¤„ç†å„ç§ DOM ç»“æ„ï¼‰
- æµ‹è¯• AI ä¸å¯ç”¨çš„æƒ…å†µ
- æµ‹è¯•å­˜å‚¨ä¸Šé™ï¼ˆå¤§é‡ç¬”è®°ï¼‰

**é¢è¯•è¯æœ¯**ï¼š
> "æµ‹è¯•é˜¶æ®µæˆ‘å‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼š
> 1. æŸäº›ç½‘ç«™çš„ iframe ä¼šé˜»æ­¢ content script æ³¨å…¥
> 2. AI é¦–æ¬¡è°ƒç”¨éœ€è¦ä¸‹è½½æ¨¡å‹ï¼ˆ500MB+ï¼‰
> 3. å¤§é‡ç¬”è®°æ—¶æ€ç»´å¯¼å›¾ä¼šå¡é¡¿
> 
> æˆ‘éƒ½ä¸€ä¸€è§£å†³äº†è¿™äº›é—®é¢˜ã€‚"

---

### ç¬¬ä¹é˜¶æ®µï¼šæ–‡æ¡£å’Œéƒ¨ç½²ï¼ˆ1å¤©ï¼‰

#### 24. ç¼–å†™æ–‡æ¡£
- README.mdï¼ˆåŠŸèƒ½ä»‹ç»ï¼‰
- ARCHITECTURE.mdï¼ˆæ¶æ„è®¾è®¡ï¼‰
- QUICKSTART.mdï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰
- æ•…éšœè¯Šæ–­.mdï¼ˆå¸¸è§é—®é¢˜ï¼‰

**é¢è¯•è¯æœ¯**ï¼š
> "æˆ‘å†™äº†å®Œæ•´çš„æ–‡æ¡£ï¼Œä¸ä»…æ˜¯ä¸ºäº†å…¶ä»–äººèƒ½ç†è§£é¡¹ç›®ï¼Œä¹Ÿæ˜¯å¸®åŠ©æˆ‘è‡ªå·±æ¢³ç†æ€è·¯ã€‚å¥½çš„æ–‡æ¡£æ˜¯é¡¹ç›®è´¨é‡çš„ä½“ç°ã€‚"

#### 25. æ„å»ºå’Œæ‰“åŒ…
```bash
npm run build
```

æ£€æŸ¥ dist ç›®å½•ï¼š
- æ‰€æœ‰æ–‡ä»¶æ˜¯å¦æ­£ç¡®è¾“å‡º
- æ–‡ä»¶å¤§å°æ˜¯å¦åˆç†ï¼ˆæ€»å…± < 5MBï¼‰
- manifest.json æ˜¯å¦æ­£ç¡®

**é¢è¯•è¯æœ¯**ï¼š
> "æ„å»ºæ—¶é‡åˆ°çš„ä¸»è¦é—®é¢˜æ˜¯ Vite çš„å¤šå…¥å£é…ç½®ï¼Œéœ€è¦ç¡®ä¿æ¯ä¸ªéƒ¨åˆ†éƒ½è¾“å‡ºåˆ°æ­£ç¡®çš„ç›®å½•ï¼Œå¹¶ä¸” CSS æ­£ç¡®åˆ†ç¦»ã€‚"

---

## é¢è¯•è®²è§£ç­–ç•¥

### å¼€åœºï¼ˆ30ç§’ï¼‰

> "è¿™æ˜¯æˆ‘å¼€å‘çš„ **WebMind**ï¼Œä¸€ä¸ª Chrome æµè§ˆå™¨æ‰©å±•ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ï¼šç”¨æˆ·åœ¨ä»»ä½•ç½‘é¡µä¸Šé€‰ä¸­æ–‡å­—ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œå°±èƒ½ç”¨ AI è‡ªåŠ¨ç”Ÿæˆæ‘˜è¦å¹¶ä¿å­˜ä¸ºç¬”è®°ã€‚æ‰€æœ‰ç¬”è®°ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯äº¤äº’çš„æ€ç»´å¯¼å›¾ï¼Œå¸®åŠ©ç”¨æˆ·å»ºç«‹çŸ¥è¯†è¿æ¥ã€‚
> 
> æ•´ä¸ªé¡¹ç›®å®Œå…¨æœ¬åœ°åŒ–ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡å™¨ï¼Œä½¿ç”¨ Chrome å†…ç½®çš„ Gemini Nano AIï¼Œä¿æŠ¤ç”¨æˆ·éšç§ã€‚"

### æŠ€æœ¯æ¶æ„ä»‹ç»ï¼ˆ1åˆ†é’Ÿï¼‰

> "æŠ€æœ¯æ ˆæ–¹é¢ï¼š
> - **å‰ç«¯**ï¼šReact 18 + TypeScript + Zustand çŠ¶æ€ç®¡ç†
> - **å¯è§†åŒ–**ï¼šD3.js åŠ›å¯¼å‘å›¾
> - **æ„å»º**ï¼šVite 5 å¤šå…¥å£é…ç½®
> - **AI**ï¼šChrome Built-in AIï¼ˆGemini Nanoï¼‰
> - **æ‰©å±•è§„èŒƒ**ï¼šManifest V3
> 
> æ¶æ„è®¾è®¡ä¸Šï¼Œåˆ†ä¸º 5 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š
> 1. **Content Script**ï¼šç›‘å¬æ–‡æœ¬é€‰æ‹©ï¼Œæ˜¾ç¤ºæµ®åŠ¨æŒ‰é’®
> 2. **Background Worker**ï¼šæ¶ˆæ¯è·¯ç”±å’Œä¸šåŠ¡é€»è¾‘
> 3. **Offscreen Document**ï¼šAI API è°ƒç”¨ä»£ç†ï¼ˆè¿™æ˜¯æœ€æ ¸å¿ƒçš„æŠ€æœ¯æŒ‘æˆ˜ï¼‰
> 4. **Popup**ï¼šå¿«é€ŸæŸ¥çœ‹æœ€è¿‘ç¬”è®°
> 5. **Side Panel**ï¼šå®Œæ•´çš„ç¬”è®°ç®¡ç†å’Œæ€ç»´å¯¼å›¾"

### æ ¸å¿ƒéš¾ç‚¹è®²è§£ï¼ˆ2åˆ†é’Ÿï¼Œé‡ç‚¹ï¼ï¼‰

> "å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„**æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜**æ˜¯ Chrome Built-in AI çš„è°ƒç”¨ã€‚
> 
> **é—®é¢˜èƒŒæ™¯**ï¼š
> - Chrome Built-in AI åªèƒ½åœ¨é¡µé¢ä¸Šä¸‹æ–‡ï¼ˆæœ‰ DOM ç¯å¢ƒï¼‰ä¸­è°ƒç”¨
> - ä½† Manifest V3 è§„èŒƒå¼ºåˆ¶ä½¿ç”¨ Service Worker ä½œä¸ºåå°
> - Service Worker æ²¡æœ‰ DOM ç¯å¢ƒï¼Œæ— æ³•ç›´æ¥è°ƒç”¨ AI API
> 
> **è§£å†³æ–¹æ¡ˆ**ï¼š
> æˆ‘ç ”ç©¶äº† Chrome æ–‡æ¡£ï¼Œå‘ç°å¯ä»¥ç”¨ **Offscreen Document** ä½œä¸ºä»£ç†ï¼š
> 1. Background Worker åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ HTML é¡µé¢ï¼ˆOffscreen Documentï¼‰
> 2. é€šè¿‡æ¶ˆæ¯ä¼ é€’æŠŠæ–‡æœ¬å‘é€ç»™ Offscreen
> 3. Offscreen åœ¨é¡µé¢ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ AI API
> 4. æŠŠç»“æœé€šè¿‡æ¶ˆæ¯ä¼ é€’è¿”å›ç»™ Background
> 5. Background å†æŠŠç»“æœè¿”å›ç»™ Content Script
> 
> **ä¼˜åŒ–ç»†èŠ‚**ï¼š
> - å¤ç”¨å·²åˆ›å»ºçš„ Offscreen Documentï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯
> - æ·»åŠ é™çº§æ–¹æ¡ˆï¼šAI ä¸å¯ç”¨æ—¶ç”¨ç®€å•ç®—æ³•ç”Ÿæˆæ‘˜è¦
> - ç›‘å¬æ¨¡å‹ä¸‹è½½è¿›åº¦ï¼Œç»™ç”¨æˆ·åé¦ˆ
> 
> è¿™ä¸ªæ–¹æ¡ˆæ—¢ç¬¦åˆ Manifest V3 è§„èŒƒï¼Œåˆè§£å†³äº† AI è°ƒç”¨çš„é™åˆ¶ï¼Œæ˜¯æ•´ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ¸å¿ƒã€‚"

### D3.js æ€ç»´å¯¼å›¾è®²è§£ï¼ˆ1-2åˆ†é’Ÿï¼‰

> "æ€ç»´å¯¼å›¾æ˜¯é¡¹ç›®çš„å¦ä¸€ä¸ªäº®ç‚¹ï¼Œæˆ‘ç”¨ D3.js å®ç°äº†åŠ›å¯¼å‘å›¾å¯è§†åŒ–ã€‚
> 
> **ç®—æ³•æµç¨‹**ï¼š
> 1. **æ•°æ®å‡†å¤‡**ï¼šä»ç¬”è®°ä¸­æå–å…³é”®è¯ï¼ˆTF-IDF ç®—æ³•ç®€åŒ–ç‰ˆï¼‰
> 2. **æ„å»ºå›¾**ï¼šå…³é”®è¯ä½œä¸ºèŠ‚ç‚¹ï¼Œå…±ç°å…³ç³»ä½œä¸ºè¾¹
> 3. **åŠ›å¯¼å‘å¸ƒå±€**ï¼šç”¨ç‰©ç†æ¨¡æ‹Ÿè‡ªåŠ¨è®¡ç®—èŠ‚ç‚¹ä½ç½®
>    - å¼¹ç°§åŠ›ï¼šæŠŠæœ‰è¿çº¿çš„èŠ‚ç‚¹æ‹‰åˆ°ä¸€èµ·
>    - ç”µè·åŠ›ï¼šè®©æ‰€æœ‰èŠ‚ç‚¹äº’ç›¸æ’æ–¥
>    - ä¸­å¿ƒåŠ›ï¼šä¿æŒæ•´ä½“å±…ä¸­
>    - ç¢°æ’åŠ›ï¼šé˜²æ­¢èŠ‚ç‚¹é‡å 
> 4. **äº¤äº’**ï¼šæ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€å¹³ç§»
> 
> **æ€§èƒ½ä¼˜åŒ–**ï¼š
> - é™åˆ¶èŠ‚ç‚¹æ•°é‡ï¼ˆæœ€å¤š50ä¸ªï¼‰
> - åŠ å¿«åŠ›æ¨¡æ‹Ÿæ”¶æ•›é€Ÿåº¦
> - æœªæ¥å¯ä»¥ç”¨ Canvas æ›¿ä»£ SVG æå‡æ€§èƒ½"

### æŠ€æœ¯é€‰å‹ç†ç”±ï¼ˆ30ç§’ - 1åˆ†é’Ÿï¼‰

> "**ä¸ºä»€ä¹ˆé€‰ Zustand**ï¼šæ¯” Redux è½»é‡ 10 å€ï¼ŒAPI ç®€æ´ï¼Œæ€§èƒ½æ›´å¥½
> 
> **ä¸ºä»€ä¹ˆé€‰ Vite**ï¼šæ„å»ºé€Ÿåº¦æ¯” Webpack å¿« 10-100 å€ï¼ŒHMR ä½“éªŒå¥½
> 
> **ä¸ºä»€ä¹ˆé€‰ TypeScript**ï¼šç±»å‹å®‰å…¨ï¼Œé‡æ„å‹å¥½ï¼Œæ–‡æ¡£æ€§å¥½
> 
> **ä¸ºä»€ä¹ˆé€‰ D3.js**ï¼šæœ€æˆç†Ÿçš„å¯è§†åŒ–åº“ï¼Œç¤¾åŒºå¼ºå¤§ï¼Œçµæ´»æ€§é«˜"

### é¡¹ç›®äº®ç‚¹æ€»ç»“ï¼ˆ30ç§’ï¼‰

> "æ€»ç»“ä¸€ä¸‹é¡¹ç›®çš„å‡ ä¸ªäº®ç‚¹ï¼š
> 1. **æŠ€æœ¯åˆ›æ–°**ï¼šä½¿ç”¨å‰æ²¿çš„ Chrome Built-in AIï¼Œè§£å†³äº† Offscreen è°ƒç”¨éš¾é¢˜
> 2. **æ¶æ„è®¾è®¡**ï¼šæ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼Œæ¶ˆæ¯ä¼ é€’æœºåˆ¶
> 3. **ç”¨æˆ·ä½“éªŒ**ï¼šç²¾ç¾çš„ UIï¼Œæµç•…çš„äº¤äº’ï¼Œå®Œå…¨ç¦»çº¿
> 4. **å·¥ç¨‹è´¨é‡**ï¼šå®Œæ•´çš„ç±»å‹ç³»ç»Ÿï¼Œè¯¦ç»†çš„æ–‡æ¡£ï¼Œè‰¯å¥½çš„é”™è¯¯å¤„ç†
> 5. **éšç§ä¿æŠ¤**ï¼šæ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œä¸ä¾èµ–å¤–éƒ¨æœåŠ¡å™¨"

---

## å¸¸è§é¢è¯•é—®é¢˜åŠå›ç­”

### Q1: ä¸ºä»€ä¹ˆé€‰æ‹©åš Chrome æ‰©å±•è€Œä¸æ˜¯ Web åº”ç”¨ï¼Ÿ

**å›ç­”**ï¼š
> "æˆ‘é€‰æ‹©åš Chrome æ‰©å±•æœ‰å‡ ä¸ªåŸå› ï¼š
> 1. **æ— ç¼é›†æˆ**ï¼šç”¨æˆ·æµè§ˆä»»ä½•ç½‘é¡µæ—¶éƒ½èƒ½éšæ—¶ä½¿ç”¨ï¼Œä¸éœ€è¦åˆ‡æ¢æ ‡ç­¾é¡µ
> 2. **æŠ€æœ¯æŒ‘æˆ˜**ï¼šæ‰©å±•å¼€å‘æ¶‰åŠå¤šä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”çº¯ Web å¼€å‘æ›´å¤æ‚
> 3. **å­¦ä¹ ä»·å€¼**ï¼šChrome æ‰©å±•æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº§å“å½¢æ€ï¼Œæœ‰æ˜ç¡®çš„è§„èŒƒå’Œé™åˆ¶
> 4. **å®ç”¨æ€§**ï¼šæˆ‘è‡ªå·±ä¹Ÿæœ‰ç¬”è®°éœ€æ±‚ï¼Œæƒ³åšä¸€ä¸ªçœŸæ­£èƒ½ç”¨çš„å·¥å…·"

### Q2: é‡åˆ°è¿‡ä»€ä¹ˆæŠ€æœ¯éš¾ç‚¹ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ

**å›ç­”**ï¼ˆè¯¦ç»†ç‰ˆï¼Œå‚è€ƒä¸Šé¢çš„"æ ¸å¿ƒéš¾ç‚¹è®²è§£"ï¼‰

### Q3: å¦‚æœç”¨æˆ·æœ‰ 10000 æ¡ç¬”è®°ï¼Œæ€§èƒ½ä¼šæ€æ ·ï¼Ÿ

**å›ç­”**ï¼š
> "è¿™æ˜¯ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚ç›®å‰çš„å®ç°ç¡®å®æœ‰æ€§èƒ½ç“¶é¢ˆï¼š
> 
> **ç°æœ‰é—®é¢˜**ï¼š
> 1. ç¬”è®°åˆ—è¡¨ä¼šå…¨éƒ¨åŠ è½½åˆ°å†…å­˜
> 2. æ€ç»´å¯¼å›¾èŠ‚ç‚¹è¿‡å¤šä¼šå¡é¡¿
> 3. æœç´¢æ˜¯å®¢æˆ·ç«¯å…¨é‡éå†
> 
> **ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
> 1. **è™šæ‹Ÿæ»šåŠ¨**ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸçš„ç¬”è®°ï¼ˆreact-windowï¼‰
> 2. **åˆ†é¡µåŠ è½½**ï¼šæ¯æ¬¡åªåŠ è½½ 50 æ¡
> 3. **ç´¢å¼•ä¼˜åŒ–**ï¼šå»ºç«‹å…³é”®è¯ç´¢å¼•ï¼ŒåŠ é€Ÿæœç´¢
> 4. **Canvas æ¸²æŸ“**ï¼šæ€ç»´å¯¼å›¾ç”¨ Canvas æ›¿ä»£ SVG
> 5. **æ•°æ®åº“å‡çº§**ï¼šè€ƒè™‘ç”¨ IndexedDB æ›¿ä»£ Chrome Storage
> 
> å¦‚æœè®©æˆ‘é‡æ–°è®¾è®¡ï¼Œæˆ‘ä¼šä¸€å¼€å§‹å°±è€ƒè™‘è¿™äº›åœºæ™¯ã€‚"

### Q4: ä¸ºä»€ä¹ˆä¸ç”¨ç°æˆçš„æ€ç»´å¯¼å›¾åº“ï¼ˆå¦‚ Mermaid.jsï¼‰ï¼Ÿ

**å›ç­”**ï¼š
> "æˆ‘è€ƒè™‘è¿‡å‡ ä¸ªæ€ç»´å¯¼å›¾åº“ï¼š
> 
> **Mermaid.js**ï¼š
> - ä¼˜ç‚¹ï¼šè¯­æ³•ç®€å•ï¼Œé…ç½®æ–¹ä¾¿
> - ç¼ºç‚¹ï¼šäº¤äº’æ€§å·®ï¼Œä¸æ”¯æŒåŠ¨æ€ä¿®æ”¹ï¼Œæ ·å¼å®šåˆ¶å›°éš¾
> 
> **ECharts/AntV**ï¼š
> - ä¼˜ç‚¹ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œæ–‡æ¡£å®Œå–„
> - ç¼ºç‚¹ï¼šä½“ç§¯å¤§ï¼ˆå‹ç¼©å 300KB+ï¼‰ï¼ŒåŠŸèƒ½è¿‡äºå¤æ‚
> 
> **D3.js**ï¼š
> - ä¼˜ç‚¹ï¼šçµæ´»æ€§æœ€é«˜ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶æ¸²æŸ“å’Œäº¤äº’
> - ç¼ºç‚¹ï¼šå­¦ä¹ æ›²çº¿é™¡å³­
> 
> æˆ‘é€‰æ‹© D3.js æ˜¯å› ä¸ºæˆ‘éœ€è¦è‡ªå®šä¹‰çš„åŠ›å¯¼å‘å¸ƒå±€ï¼Œè¿˜è¦æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ç­‰äº¤äº’ã€‚è™½ç„¶å¼€å‘æˆæœ¬é«˜ä¸€äº›ï¼Œä½†å¾—åˆ°äº†å®Œå…¨çš„æ§åˆ¶æƒã€‚"

### Q5: å¦‚æœ Chrome æ”¹äº† Built-in AI çš„ API æ€ä¹ˆåŠï¼Ÿ

**å›ç­”**ï¼š
> "è¿™ç¡®å®æ˜¯ä¸ªé£é™©ï¼Œå› ä¸º Chrome Built-in AI ç›®å‰è¿˜æ˜¯å®éªŒæ€§åŠŸèƒ½ã€‚æˆ‘çš„åº”å¯¹ç­–ç•¥ï¼š
> 
> 1. **æŠ½è±¡å±‚**ï¼šæŠŠ AI è°ƒç”¨å°è£…åœ¨ `src/shared/utils/ai.ts`ï¼Œæ–¹ä¾¿æ›¿æ¢
> 2. **é™çº§æ–¹æ¡ˆ**ï¼šå·²ç»å®ç°äº†ç®€å•ç®—æ³•ä½œä¸ºåå¤‡
> 3. **å¤š AI æ”¯æŒ**ï¼šå¯ä»¥æ‰©å±•æ”¯æŒå…¶ä»– AIï¼ˆOpenAIã€Anthropicï¼‰
> 4. **æŒç»­å…³æ³¨**ï¼šè®¢é˜… Chrome å¼€å‘è€…åšå®¢ï¼ŒåŠæ—¶æ›´æ–°
> 
> æœªæ¥å¯èƒ½çš„æ–¹å‘ï¼š
> - æ”¯æŒç”¨æˆ·é…ç½®è‡ªå·±çš„ API keyï¼ˆOpenAI/Claudeï¼‰
> - é›†æˆæœ¬åœ°è¿è¡Œçš„å¼€æºæ¨¡å‹ï¼ˆOllamaï¼‰
> - æä¾›å¤šç§ AI åç«¯é€‰æ‹©"

### Q6: å¦‚æœè¦ä¸Šçº¿ Chrome Web Storeï¼Œè¿˜éœ€è¦åšä»€ä¹ˆï¼Ÿ

**å›ç­”**ï¼š
> "ä¸Šçº¿ Chrome Web Store éœ€è¦ï¼š
> 
> **æŠ€æœ¯å‡†å¤‡**ï¼š
> 1. å®Œå–„éšç§æ”¿ç­–é¡µé¢
> 2. æ·»åŠ ç”¨æˆ·ä½¿ç”¨æŒ‡å—
> 3. å…¨é¢æµ‹è¯•ï¼ˆå„ç§ç½‘ç«™ã€å„ç§åœºæ™¯ï¼‰
> 4. å‹ç¼©ä»£ç ï¼Œä¼˜åŒ–ä½“ç§¯
> 5. æ·»åŠ é”™è¯¯ä¸ŠæŠ¥ï¼ˆSentryï¼‰
> 
> **å®£ä¼ ææ–™**ï¼š
> 1. æˆªå›¾ï¼ˆ1280x800ï¼Œè‡³å°‘ 3 å¼ ï¼‰
> 2. å®£ä¼ è§†é¢‘ï¼ˆå¯é€‰ï¼‰
> 3. è¯¦ç»†æè¿°ï¼ˆåŒ…æ‹¬åŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•ï¼‰
> 4. å›¾æ ‡ï¼ˆ128x128ï¼ŒSVG æ ¼å¼ï¼‰
> 
> **å®¡æ ¸å‡†å¤‡**ï¼š
> 1. è¯´æ˜ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æƒé™
> 2. è§£é‡Š AI åŠŸèƒ½çš„ç”¨é€”
> 3. å‡†å¤‡åº”å¯¹å®¡æ ¸é—®é¢˜
> 
> **å‘å¸ƒå**ï¼š
> 1. æ”¶é›†ç”¨æˆ·åé¦ˆ
> 2. ç›‘æ§é”™è¯¯æ—¥å¿—
> 3. æŒç»­è¿­ä»£ä¼˜åŒ–"

### Q7: ä¸ºä»€ä¹ˆä¸ç”¨ React Context è€Œç”¨ Zustandï¼Ÿ

**å›ç­”**ï¼š
> "æˆ‘åœ¨ Context å’Œ Zustand ä¹‹é—´åšäº†æƒè¡¡ï¼š
> 
> **Context çš„é—®é¢˜**ï¼š
> - æ¯æ¬¡ state å˜åŒ–ï¼Œæ‰€æœ‰ä½¿ç”¨ Context çš„ç»„ä»¶éƒ½ä¼šé‡æ¸²æŸ“
> - éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–ï¼ˆuseMemo, React.memoï¼‰
> - å¤šä¸ª Context ä¼šå¯¼è‡´ Provider åµŒå¥—åœ°ç‹±
> 
> **Zustand çš„ä¼˜åŠ¿**ï¼š
> - é€‰æ‹©æ€§è®¢é˜…ï¼šåªæœ‰ç”¨åˆ°çš„ state å˜åŒ–æ‰é‡æ¸²æŸ“
> - æ— éœ€ Provider åŒ…è£¹
> - API æ›´ç®€æ´ï¼š`const notes = useStore(state => state.notes)`
> - æ”¯æŒä¸­é—´ä»¶ï¼ˆæŒä¹…åŒ–ã€DevToolsï¼‰
> 
> å¯¹äºè¿™ä¸ªé¡¹ç›®çš„è§„æ¨¡ï¼ˆ4ä¸ªç»„ä»¶ï¼Œå…±äº«ç¬”è®°æ•°æ®ï¼‰ï¼ŒZustand æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚"

### Q8: ä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®è¿˜æœ‰å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿ

**å›ç­”**ï¼ˆå±•ç¤ºæ€è€ƒæ·±åº¦ï¼‰ï¼š
> "æˆ‘è®¤ä¸ºæœ‰å‡ ä¸ªæ–¹å‘å¯ä»¥æ”¹è¿›ï¼š
> 
> **åŠŸèƒ½å±‚é¢**ï¼š
> 1. **æ ‡ç­¾ç³»ç»Ÿ**ï¼šç»™ç¬”è®°æ‰“æ ‡ç­¾ï¼Œæ›´å¥½åœ°åˆ†ç±»
> 2. **ç¬”è®°ç¼–è¾‘**ï¼šç›®å‰åªèƒ½åˆ é™¤ï¼Œä¸èƒ½ä¿®æ”¹
> 3. **å…¨æ–‡æœç´¢**ï¼šæ”¯æŒé«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ
> 4. **å¯¼å‡ºåŠŸèƒ½**ï¼šæ”¯æŒ Markdownã€PDF æ ¼å¼
> 5. **æ€ç»´å¯¼å›¾å¢å¼º**ï¼šæ‰‹åŠ¨è¿æ¥èŠ‚ç‚¹ã€è°ƒæ•´å¸ƒå±€
> 
> **æŠ€æœ¯å±‚é¢**ï¼š
> 1. **æµ‹è¯•è¦†ç›–**ï¼šæ·»åŠ å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•
> 2. **æ€§èƒ½ç›‘æ§**ï¼šé›†æˆæ€§èƒ½åˆ†æå·¥å…·
> 3. **é”™è¯¯è¿½è¸ª**ï¼šæ¥å…¥ Sentry
> 4. **å›½é™…åŒ–**ï¼šæ”¯æŒå¤šè¯­è¨€
> 
> **æ¶æ„å±‚é¢**ï¼š
> 1. **æ’ä»¶ç³»ç»Ÿ**ï¼šå…è®¸ç¬¬ä¸‰æ–¹æ‰©å±•
> 2. **æ•°æ®åŒæ­¥**ï¼šå¯é€‰çš„äº‘åŒæ­¥åŠŸèƒ½
> 3. **ç¦»çº¿ç¼“å­˜**ï¼šService Worker ç¼“å­˜ç­–ç•¥
> 
> å¦‚æœæœ‰æ›´å¤šæ—¶é—´ï¼Œæˆ‘ä¼šä¼˜å…ˆå®ç°æ ‡ç­¾ç³»ç»Ÿå’Œç¬”è®°ç¼–è¾‘ï¼Œå› ä¸ºè¿™æ˜¯ç”¨æˆ·æœ€éœ€è¦çš„åŠŸèƒ½ã€‚"

---

## æŠ€æœ¯éš¾ç‚¹æ·±å…¥ç†è§£

### éš¾ç‚¹ 1ï¼šManifest V3 çš„é™åˆ¶

**é—®é¢˜**ï¼š
- ä¸èƒ½ç”¨ background pageï¼Œå¿…é¡»ç”¨ Service Worker
- Service Worker æ²¡æœ‰ DOMï¼Œä¸èƒ½æŒä¹…è¿è¡Œ
- å¾ˆå¤š V2 çš„ API åœ¨ V3 ä¸­åºŸå¼ƒäº†

**è§£å†³**ï¼š
- ç”¨ Offscreen Document è§£å†³ DOM é—®é¢˜
- ç”¨ chrome.alarms æ›¿ä»£ setTimeoutï¼ˆé•¿æ—¶é—´ä»»åŠ¡ï¼‰
- ç”¨æ¶ˆæ¯ä¼ é€’æ›¿ä»£ç›´æ¥è°ƒç”¨

**é¢è¯•è¯æœ¯**ï¼š
> "Manifest V3 çš„æœ€å¤§å˜åŒ–æ˜¯ç”¨ Service Worker æ›¿ä»£ background pageã€‚Service Worker çš„ç‰¹ç‚¹æ˜¯äº‹ä»¶é©±åŠ¨ï¼Œä¸æŒä¹…è¿è¡Œï¼Œè¿™å¸¦æ¥äº†å¾ˆå¤šé™åˆ¶ã€‚
> 
> æ¯”å¦‚ï¼Œæˆ‘ä¸èƒ½ç”¨å…¨å±€å˜é‡ä¿å­˜çŠ¶æ€ï¼ˆWorker å¯èƒ½éšæ—¶è¢«é”€æ¯ï¼‰ï¼Œå¿…é¡»ç”¨ Storage APIã€‚ä¸èƒ½ç”¨ DOM APIï¼Œæ‰€ä»¥éœ€è¦ Offscreen Documentã€‚
> 
> è™½ç„¶ V3 å¸¦æ¥äº†å¾ˆå¤šéº»çƒ¦ï¼Œä½†å®ƒçš„å‡ºå‘ç‚¹æ˜¯å¥½çš„ï¼šå‡å°‘å†…å­˜å ç”¨ï¼Œæå‡æµè§ˆå™¨æ€§èƒ½ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚"

---

### éš¾ç‚¹ 2ï¼šD3.js åŠ›å¯¼å‘å›¾çš„å·¥ä½œåŸç†

**ç‰©ç†æ¨¡æ‹Ÿ**ï¼š
åŠ›å¯¼å‘å›¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰©ç†æ¨¡æ‹Ÿç³»ç»Ÿï¼Œæ¯ä¸ªèŠ‚ç‚¹å—åˆ°å¤šä¸ªåŠ›çš„ä½œç”¨ã€‚

**åŠ›çš„è¯¦è§£**ï¼š

1. **Link Forceï¼ˆå¼¹ç°§åŠ›ï¼‰**
```typescript
.force('link', d3.forceLink(links).distance(150))
```
- æŠŠæœ‰è¿çº¿çš„èŠ‚ç‚¹æ‹‰åˆ°ä¸€èµ·
- distance=150 è¡¨ç¤ºç†æƒ³è·ç¦» 150 åƒç´ 
- å°±åƒå¼¹ç°§ï¼šè·ç¦»å¤ªè¿œä¼šæ‹‰è¿‘ï¼Œå¤ªè¿‘ä¼šæ¨å¼€

2. **Charge Forceï¼ˆç”µè·åŠ›ï¼‰**
```typescript
.force('charge', d3.forceManyBody().strength(-500))
```
- è´Ÿæ•°è¡¨ç¤ºæ’æ–¥åŠ›ï¼ˆåƒåŒæ€§ç”µè·ï¼‰
- è®©æ‰€æœ‰èŠ‚ç‚¹äº’ç›¸æ’æ–¥ï¼Œé¿å…èšåœ¨ä¸€èµ·
- strength è¶Šå¤§ï¼Œæ’æ–¥åŠ›è¶Šå¼º

3. **Center Forceï¼ˆä¸­å¿ƒåŠ›ï¼‰**
```typescript
.force('center', d3.forceCenter(width/2, height/2))
```
- æŠŠæ•´ä¸ªå›¾æ‹‰å‘ç”»å¸ƒä¸­å¿ƒ
- é˜²æ­¢èŠ‚ç‚¹é£å‡ºè§†é‡

4. **Collision Forceï¼ˆç¢°æ’åŠ›ï¼‰**
```typescript
.force('collision', d3.forceCollide().radius(60))
```
- é˜²æ­¢èŠ‚ç‚¹é‡å 
- radius=60 è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹å‘¨å›´ 60 åƒç´ èŒƒå›´å†…ä¸èƒ½æœ‰å…¶ä»–èŠ‚ç‚¹

**æ¨¡æ‹Ÿè¿‡ç¨‹**ï¼š
```typescript
simulation.on('tick', () => {
  // æ¯ä¸€å¸§ï¼ŒD3 ä¼šï¼š
  // 1. è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹å—åˆ°çš„æ€»åŠ›
  // 2. æ›´æ–°èŠ‚ç‚¹çš„é€Ÿåº¦å’Œä½ç½®
  // 3. é™ä½ç³»ç»Ÿèƒ½é‡ï¼ˆalpha è¡°å‡ï¼‰
  // 4. å½“ alpha < alphaMin æ—¶åœæ­¢æ¨¡æ‹Ÿ
  
  // æˆ‘ä»¬è¦åšçš„æ˜¯ï¼šæ›´æ–° SVG å…ƒç´ çš„ä½ç½®
  updateNodePositions();
});
```

**é¢è¯•è¯æœ¯**ï¼š
> "D3 çš„åŠ›å¯¼å‘å›¾å°±åƒä¸€ä¸ªç‰©ç†å¼•æ“ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªç²’å­ï¼Œå—åˆ°å¤šç§åŠ›çš„ä½œç”¨ã€‚
> 
> æ¨¡æ‹Ÿå¼€å§‹æ—¶ï¼ŒèŠ‚ç‚¹ä¼šéšæœºåˆ†å¸ƒï¼Œç„¶åå¼€å§‹è¿åŠ¨ï¼š
> - æœ‰è¿çº¿çš„èŠ‚ç‚¹è¢«å¼¹ç°§åŠ›æ‹‰åˆ°ä¸€èµ·
> - æ‰€æœ‰èŠ‚ç‚¹å› ä¸ºç”µè·åŠ›äº’ç›¸æ’æ–¥
> - æ•´ä½“è¢«ä¸­å¿ƒåŠ›ä¿æŒå±…ä¸­
> - ç¢°æ’åŠ›é˜²æ­¢èŠ‚ç‚¹é‡å 
> 
> ç»è¿‡å‡ ç™¾æ¬¡è¿­ä»£ï¼Œç³»ç»Ÿä¼šè¾¾åˆ°å¹³è¡¡çŠ¶æ€ï¼Œè¿™æ—¶å€™èŠ‚ç‚¹çš„ä½ç½®å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„æœ€ç»ˆå¸ƒå±€ã€‚
> 
> æ•´ä¸ªè¿‡ç¨‹æ˜¯è‡ªåŠ¨çš„ï¼Œæˆ‘ä¸éœ€è¦æ‰‹åŠ¨è®¡ç®—åæ ‡ï¼Œè¿™å°±æ˜¯åŠ›å¯¼å‘å¸ƒå±€çš„å¼ºå¤§ä¹‹å¤„ã€‚"

---

### éš¾ç‚¹ 3ï¼šChrome Storage çš„å¹¶å‘é—®é¢˜

**é—®é¢˜**ï¼š
å¦‚æœå¤šä¸ªåœ°æ–¹åŒæ—¶ä¿®æ”¹åŒä¸€æ¡ç¬”è®°ï¼Œå¯èƒ½ä¼šæ•°æ®ä¸¢å¤±ã€‚

**ç¤ºä¾‹**ï¼š
```typescript
// å±é™©çš„ä»£ç ï¼š
async function deleteNote(id: string) {
  const notes = await getAllNotes(); // è¯»å–
  const filtered = notes.filter(n => n.id !== id); // ä¿®æ”¹
  await chrome.storage.local.set({ webmind_notes: filtered }); // å†™å…¥
}

// å¦‚æœä¸¤ä¸ªæ“ä½œåŒæ—¶æ‰§è¡Œï¼š
// 1. æ“ä½œ A è¯»å– [note1, note2, note3]
// 2. æ“ä½œ B è¯»å– [note1, note2, note3]
// 3. æ“ä½œ A åˆ é™¤ note1 â†’ [note2, note3]
// 4. æ“ä½œ B åˆ é™¤ note2 â†’ [note1, note3]
// 5. æœ€ç»ˆç»“æœï¼š[note1, note3]ï¼ˆnote2 è¢«è¯¯æ¢å¤äº†ï¼ï¼‰
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **ä¹è§‚é”**ï¼ˆç®€å•åœºæ™¯ï¼‰
```typescript
async function deleteNote(id: string) {
  let success = false;
  while (!success) {
    const { webmind_notes: notes, _version } = await chrome.storage.local.get(['webmind_notes', '_version']);
    const filtered = notes.filter(n => n.id !== id);
    
    // å°è¯•å†™å…¥ï¼Œå¸¦ç‰ˆæœ¬æ£€æŸ¥
    const newVersion = (_version || 0) + 1;
    await chrome.storage.local.set({ 
      webmind_notes: filtered,
      _version: newVersion
    });
    
    success = true; // ç®€åŒ–ç‰ˆï¼Œå®é™…éœ€è¦æ£€æŸ¥ç‰ˆæœ¬
  }
}
```

2. **äº’æ–¥é”**ï¼ˆå¤æ‚åœºæ™¯ï¼‰
```typescript
class StorageLock {
  private locked = false;
  private queue: (() => void)[] = [];

  async acquire() {
    if (!this.locked) {
      this.locked = true;
      return;
    }
    
    await new Promise(resolve => {
      this.queue.push(resolve);
    });
  }

  release() {
    const next = this.queue.shift();
    if (next) {
      next();
    } else {
      this.locked = false;
    }
  }
}

const lock = new StorageLock();

async function deleteNote(id: string) {
  await lock.acquire();
  try {
    const notes = await getAllNotes();
    const filtered = notes.filter(n => n.id !== id);
    await chrome.storage.local.set({ webmind_notes: filtered });
  } finally {
    lock.release();
  }
}
```

**é¢è¯•è¯æœ¯**ï¼š
> "Chrome Storage æ˜¯å¼‚æ­¥çš„ï¼Œå¤šä¸ªæ“ä½œå¯èƒ½å¹¶å‘æ‰§è¡Œï¼Œå¯¼è‡´æ•°æ®ç«äº‰ã€‚
> 
> æˆ‘çš„é¡¹ç›®ç›®å‰è§„æ¨¡è¾ƒå°ï¼Œç”¨æˆ·ä¸å¤ªå¯èƒ½åŒæ—¶åœ¨å¤šä¸ªåœ°æ–¹ä¿®æ”¹ç¬”è®°ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰å®ç°å¤æ‚çš„å¹¶å‘æ§åˆ¶ã€‚
> 
> å¦‚æœè¦æ”¯æŒå¤šè®¾å¤‡åŒæ­¥æˆ–è€…åä½œåŠŸèƒ½ï¼Œæˆ‘ä¼šï¼š
> 1. å¼•å…¥ç‰ˆæœ¬å·æœºåˆ¶ï¼ˆç±»ä¼¼ Git çš„ commit hashï¼‰
> 2. å®ç°å†²çªæ£€æµ‹å’Œåˆå¹¶
> 3. æˆ–è€…ç›´æ¥ç”¨ IndexedDB çš„äº‹åŠ¡æœºåˆ¶"

---

## é¡¹ç›®äº®ç‚¹æ€»ç»“

### 1. æŠ€æœ¯åˆ›æ–° â­â­â­â­â­
- ä½¿ç”¨å‰æ²¿çš„ Chrome Built-in AI
- åˆ›æ–°çš„ Offscreen Document æ¶æ„
- D3.js åŠ›å¯¼å‘å›¾å¯è§†åŒ–

### 2. æ¶æ„è®¾è®¡ â­â­â­â­â­
- æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼ˆ5 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼‰
- ä¼˜é›…çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶
- å®Œæ•´çš„ç±»å‹ç³»ç»Ÿï¼ˆTypeScriptï¼‰

### 3. ç”¨æˆ·ä½“éªŒ â­â­â­â­
- ç²¾ç¾çš„æ¸å˜ UI
- æµç•…çš„äº¤äº’åŠ¨ç”»
- é›¶å­¦ä¹ æˆæœ¬

### 4. å·¥ç¨‹è´¨é‡ â­â­â­â­â­
- è¯¦ç»†çš„æ–‡æ¡£ï¼ˆ8 ç¯‡ï¼‰
- è‰¯å¥½çš„é”™è¯¯å¤„ç†
- é™çº§æ–¹æ¡ˆï¼ˆAI ä¸å¯ç”¨æ—¶ï¼‰

### 5. éšç§ä¿æŠ¤ â­â­â­â­â­
- å®Œå…¨æœ¬åœ°åŒ–
- ä¸ä¾èµ–å¤–éƒ¨æœåŠ¡å™¨
- æœ€å°åŒ–æƒé™è¯·æ±‚

---

## é¢è¯•æ—¶çš„å¿ƒç†å‡†å¤‡

### å±•ç¤ºä¿¡å¿ƒ
- è¿™æ˜¯ä½ çš„é¡¹ç›®ï¼Œä½ æœ€äº†è§£å®ƒ
- ä¸è¦è¯´"åªæ˜¯ä¸ªå°é¡¹ç›®"ï¼Œè¦è¯´"æˆ‘å¼€å‘äº†ä¸€ä¸ª..."
- é‡åˆ°ä¸ä¼šçš„é—®é¢˜ï¼Œå¦è¯šè¯´"è¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œæˆ‘ä¹‹å‰æ²¡è€ƒè™‘åˆ°"

### å±•ç¤ºæ€è€ƒæ·±åº¦
- ä¸ä»…è¯´"æˆ‘åšäº†ä»€ä¹ˆ"ï¼Œè¿˜è¦è¯´"ä¸ºä»€ä¹ˆè¿™ä¹ˆåš"
- è®¨è®ºæŠ€æœ¯é€‰å‹çš„æƒè¡¡
- è®¨è®ºé‡åˆ°çš„éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ
- è®¨è®ºå¯ä»¥æ”¹è¿›çš„åœ°æ–¹

### å±•ç¤ºå­¦ä¹ èƒ½åŠ›
- è¯´æ˜ä½ æ˜¯æ€ä¹ˆå­¦ä¹ æ–°æŠ€æœ¯çš„ï¼ˆD3.jsã€Chrome APIï¼‰
- åˆ†äº«ä½ æŸ¥é˜…çš„èµ„æ–™ï¼ˆå®˜æ–¹æ–‡æ¡£ã€GitHubã€Stack Overflowï¼‰
- å±•ç¤ºä½ çš„é—®é¢˜è§£å†³è¿‡ç¨‹

### é¿å…çš„è¯¯åŒº
- âŒ èƒŒè¯µåŠŸèƒ½åˆ—è¡¨ï¼ˆé¢è¯•å®˜èƒ½çœ‹ READMEï¼‰
- âŒ åªè¯´è¡¨é¢çš„å®ç°ï¼ˆè¦æ·±å…¥æŠ€æœ¯ç»†èŠ‚ï¼‰
- âŒ è´¬ä½è‡ªå·±çš„é¡¹ç›®ï¼ˆ"è¿™åªæ˜¯ä¸ªç©å…·é¡¹ç›®"ï¼‰
- âŒ å£°ç§°100%å®Œç¾ï¼ˆæ²¡æœ‰é¡¹ç›®æ˜¯å®Œç¾çš„ï¼‰

---

## ç¤ºä¾‹å¯¹è¯æµç¨‹

### åœºæ™¯ï¼š30åˆ†é’ŸæŠ€æœ¯é¢è¯•

**é¢è¯•å®˜**ï¼š"ä»‹ç»ä¸€ä¸‹ä½ çš„é¡¹ç›®ã€‚"

**ä½ **ï¼ˆ30ç§’å¼€åœºï¼‰ï¼š
> "æˆ‘å¼€å‘äº† WebMindï¼Œä¸€ä¸ª Chrome æµè§ˆå™¨æ‰©å±•..."ï¼ˆå‚è€ƒä¸Šé¢çš„"å¼€åœº"éƒ¨åˆ†ï¼‰

**é¢è¯•å®˜**ï¼š"ç”¨äº†å“ªäº›æŠ€æœ¯ï¼Ÿ"

**ä½ **ï¼ˆ1åˆ†é’Ÿï¼‰ï¼š
> "æŠ€æœ¯æ ˆæ–¹é¢..."ï¼ˆå‚è€ƒ"æŠ€æœ¯æ¶æ„ä»‹ç»"éƒ¨åˆ†ï¼‰

**é¢è¯•å®˜**ï¼š"é‡åˆ°è¿‡ä»€ä¹ˆæŠ€æœ¯éš¾ç‚¹ï¼Ÿ"

**ä½ **ï¼ˆ2-3åˆ†é’Ÿï¼Œé‡ç‚¹æ¥äº†ï¼‰ï¼š
> "æœ€å¤§çš„æŠ€æœ¯æŒ‘æˆ˜æ˜¯ Chrome Built-in AI çš„è°ƒç”¨..."ï¼ˆè¯¦ç»†è®²è§£ Offscreen Document æ–¹æ¡ˆï¼‰

**é¢è¯•å®˜**ï¼š"ä¸ºä»€ä¹ˆé€‰ D3.js è€Œä¸æ˜¯å…¶ä»–åº“ï¼Ÿ"

**ä½ **ï¼ˆ1åˆ†é’Ÿï¼‰ï¼š
> "æˆ‘è€ƒè™‘è¿‡å‡ ä¸ªæ–¹æ¡ˆ..."ï¼ˆå‚è€ƒ Q4 çš„å›ç­”ï¼‰

**é¢è¯•å®˜**ï¼š"å¦‚æœæˆ‘è¦æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼Œä½ å»ºè®®ä»å“ªé‡Œå¼€å§‹ï¼Ÿ"

**ä½ **ï¼ˆ1-2åˆ†é’Ÿï¼‰ï¼š
> "æˆ‘è®¤ä¸ºæœ‰å‡ ä¸ªæ–¹å‘..."ï¼ˆå‚è€ƒ Q8 çš„å›ç­”ï¼‰

**é¢è¯•å®˜**ï¼š"å†™è¿™ä¸ªé¡¹ç›®ä½ æœ€å¤§çš„æ”¶è·æ˜¯ä»€ä¹ˆï¼Ÿ"

**ä½ **ï¼ˆ1åˆ†é’Ÿï¼‰ï¼š
> "æˆ‘æœ€å¤§çš„æ”¶è·æœ‰ä¸‰ç‚¹ï¼š
> 1. **æ·±å…¥ç†è§£äº† Chrome æ‰©å±•æ¶æ„**ï¼šå¤šä¸ªè¿è¡Œç¯å¢ƒã€æ¶ˆæ¯ä¼ é€’ã€æƒé™ç®¡ç†
> 2. **æŒæ¡äº† D3.js å¯è§†åŒ–**ï¼šåŠ›å¯¼å‘å›¾çš„ç‰©ç†æ¨¡æ‹ŸåŸç†
> 3. **æå‡äº†æ¶æ„è®¾è®¡èƒ½åŠ›**ï¼šå¦‚ä½•è®¾è®¡æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œã€å¦‚ä½•å¤„ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹
> 
> æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘å­¦ä¼šäº†å¦‚ä½•ä»é›¶å¼€å§‹åšä¸€ä¸ªå®Œæ•´çš„äº§å“ï¼Œä»éœ€æ±‚åˆ†æã€æŠ€æœ¯é€‰å‹ã€ç¼–ç å®ç°ã€æµ‹è¯•ä¼˜åŒ–åˆ°æ–‡æ¡£ç¼–å†™ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å·¥ç¨‹å®è·µã€‚"

---

## æœ€åçš„å»ºè®®

### åšåˆ°å¿ƒä¸­æœ‰æ•°
1. **å®Œæ•´è¿è¡Œä¸€éé¡¹ç›®**ï¼šç¡®ä¿æ¯ä¸ªåŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œ
2. **é˜…è¯»æ¯ä¸€è¡Œä»£ç **ï¼šç†è§£æ¯ä¸ªå‡½æ•°çš„ä½œç”¨
3. **ç”»å‡ºæ¶æ„å›¾**ï¼šåœ¨çº¸ä¸Šç”»å‡ºæ•°æ®æµå’Œæ¨¡å—å…³ç³»
4. **å‡†å¤‡æ¼”ç¤º**ï¼šæå‰å½•ä¸€ä¸ª Demo è§†é¢‘

### æ·±å…¥ç†è§£æ ¸å¿ƒæ¦‚å¿µ
1. **Chrome æ‰©å±•çš„è¿è¡Œæœºåˆ¶**ï¼ˆContent Scriptã€Backgroundã€Popup çš„åŒºåˆ«ï¼‰
2. **æ¶ˆæ¯ä¼ é€’æœºåˆ¶**ï¼ˆchrome.runtime.sendMessage çš„å·¥ä½œåŸç†ï¼‰
3. **D3.js åŠ›å¯¼å‘å›¾**ï¼ˆå„ç§åŠ›çš„ä½œç”¨ï¼‰
4. **React Hooks**ï¼ˆuseStateã€useEffect çš„åŸç†ï¼‰

### ç»ƒä¹ è®²è§£
1. **å¯¹ç€é•œå­ç»ƒä¹ **ï¼šä»‹ç»é¡¹ç›® 5 é
2. **å½•éŸ³å›å¬**ï¼šæ£€æŸ¥è¯­é€Ÿã€é€»è¾‘ã€è¡¨è¾¾
3. **å‡†å¤‡ PPT**ï¼ˆå¯é€‰ï¼‰ï¼šç”¨è§†è§‰è¾…åŠ©è®²è§£
4. **æ‰¾æœ‹å‹æ¨¡æ‹Ÿ**ï¼šè®©åˆ«äººæ‰®æ¼”é¢è¯•å®˜

### å¿ƒæ€è°ƒæ•´
- è¿™ä¸ªé¡¹ç›®æœ‰è¶³å¤Ÿçš„æŠ€æœ¯æ·±åº¦ï¼Œä¸è¦å¦„è‡ªè²è–„
- ä½ åšäº† AIã€å¯è§†åŒ–ã€æµè§ˆå™¨æ‰©å±•ï¼Œè¿™äº›éƒ½æ˜¯çƒ­é—¨æŠ€æœ¯
- é‡è¦çš„ä¸æ˜¯é¡¹ç›®æœ‰å¤šå¤§ï¼Œè€Œæ˜¯ä½ ä»ä¸­å­¦åˆ°äº†ä»€ä¹ˆ
- è¯šå®é¢å¯¹ä¸è¶³ï¼Œå±•ç¤ºå­¦ä¹ èƒ½åŠ›

---

## æ€»ç»“

å¼€å‘é¡ºåºï¼š
1. åŸºç¡€æ¶æ„ï¼ˆVite + TypeScript + Manifestï¼‰
2. Content Scriptï¼ˆæ–‡æœ¬é€‰æ‹©ç›‘å¬ï¼‰
3. Background Workerï¼ˆæ¶ˆæ¯è·¯ç”±ï¼‰
4. Offscreen Documentï¼ˆAI è°ƒç”¨ï¼‰â­æ ¸å¿ƒ
5. Popupï¼ˆç®€å• UIï¼‰
6. Side Panelï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
7. æ€ç»´å¯¼å›¾ï¼ˆD3.jsï¼‰â­éš¾ç‚¹
8. ä¼˜åŒ–æµ‹è¯•
9. æ–‡æ¡£éƒ¨ç½²

é¢è¯•é‡ç‚¹ï¼š
1. å¼€åœºç®€æ´æœ‰åŠ›ï¼ˆ30ç§’ï¼‰
2. æ ¸å¿ƒéš¾ç‚¹æ·±å…¥è®²è§£ï¼ˆOffscreen Documentï¼‰
3. æŠ€æœ¯é€‰å‹æœ‰ç†æœ‰æ®
4. å±•ç¤ºæ€è€ƒæ·±åº¦ï¼ˆæ”¹è¿›æ–¹å‘ã€æƒè¡¡ï¼‰
5. ä¿æŒè‡ªä¿¡å’ŒçœŸè¯š

è®°ä½ï¼š
> **å¥½çš„é¡¹ç›®ä¸æ˜¯æ²¡æœ‰ç¼ºé™·ï¼Œè€Œæ˜¯èƒ½æ¸…æ¥šåœ°è¯´æ˜æ¯ä¸ªè®¾è®¡å†³ç­–çš„ç†ç”±ï¼Œå¹¶çŸ¥é“å¦‚ä½•æ”¹è¿›ã€‚**

---

ç¥ä½ é¢è¯•é¡ºåˆ©ï¼ğŸš€

å¦‚æœè¿˜æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘ã€‚è®°ä½ï¼šè¿™æ˜¯ä½ çš„é¡¹ç›®ï¼Œä½ æ˜¯ä¸“å®¶ï¼

