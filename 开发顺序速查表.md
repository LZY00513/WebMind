# 🚀 WebMind 开发顺序速查表

## 30秒快速回顾

```
基础架构 → Content Script → Background → Offscreen(核心!) → 
Popup → SidePanel → 思维导图(难点!) → 优化测试 → 文档
```

---

## 详细步骤（按时间顺序）

### Week 1: 基础搭建

#### Day 1-2: 项目初始化
- [ ] `npm create vite` 创建项目
- [ ] 安装依赖：React, TypeScript, Zustand, D3.js
- [ ] 配置 `tsconfig.json`
- [ ] 创建 `manifest.json`（Manifest V3）
- [ ] 配置 Vite 多入口构建
- [ ] 定义 `types.ts`（Note、Message 等类型）

**时间**: 4-6 小时  
**难度**: ⭐⭐

#### Day 3: Content Script
- [ ] 创建 `content.ts` 和 `content.css`
- [ ] 监听文本选择（mouseup 事件）
- [ ] 创建浮动按钮 UI（渐变样式）
- [ ] 实现按钮点击 → 发送消息
- [ ] 添加成功/失败通知

**时间**: 4-6 小时  
**难度**: ⭐⭐⭐

---

### Week 2: 核心逻辑

#### Day 4-5: Background Service Worker
- [ ] 创建 `service-worker.ts`
- [ ] 实现消息路由（switch-case）
- [ ] 封装存储函数（`storage.ts`）
- [ ] 实现 `saveNote`、`getAllNotes`、`deleteNote`
- [ ] 监听 storage 变化，通知其他组件

**时间**: 6-8 小时  
**难度**: ⭐⭐⭐⭐

#### Day 6-7: Offscreen Document（核心难点）
- [ ] 创建 `offscreen.html` 和 `offscreen.ts`
- [ ] Background 中实现创建 Offscreen 逻辑
- [ ] Offscreen 中调用 `window.ai.summarizer`
- [ ] 处理消息传递（Background ↔ Offscreen）
- [ ] 实现降级方案（简单摘要）
- [ ] 处理 AI 模型下载状态

**时间**: 8-12 小时  
**难度**: ⭐⭐⭐⭐⭐

**面试重点**：这是最核心的技术创新，一定要能清楚讲解！

---

### Week 3: 用户界面

#### Day 8: Popup
- [ ] 创建 `Popup.tsx`
- [ ] 实现笔记列表（最近3条）
- [ ] 添加「查看全部」按钮
- [ ] 美化 UI（渐变、阴影、动画）

**时间**: 4-6 小时  
**难度**: ⭐⭐

#### Day 9-10: Side Panel - 笔记列表
- [ ] 创建 `SidePanel.tsx`
- [ ] 使用 Zustand 管理状态
- [ ] 实现笔记网格布局
- [ ] 实现搜索过滤功能
- [ ] 实现笔记详情弹窗
- [ ] 实现删除功能
- [ ] 添加导出 JSON 功能

**时间**: 8-10 小时  
**难度**: ⭐⭐⭐

---

### Week 4: 思维导图

#### Day 11-14: MindMap 组件（最难）
- [ ] 创建 `MindMap.tsx`
- [ ] 实现关键词提取算法
- [ ] 构建图数据（nodes + links）
- [ ] 初始化 D3.js 力导向图
  - [ ] link force（弹簧力）
  - [ ] charge force（电荷力）
  - [ ] center force（中心力）
  - [ ] collision force（碰撞力）
- [ ] 实现拖拽交互
- [ ] 实现缩放和平移
- [ ] 美化节点和连线样式
- [ ] 性能优化（限制节点数量）

**时间**: 12-16 小时  
**难度**: ⭐⭐⭐⭐⭐

**面试重点**：D3.js 力导向图的原理，一定要理解！

---

### Week 5: 完善和优化

#### Day 15-16: 优化
- [ ] 添加错误处理（try-catch）
- [ ] 添加 Loading 状态
- [ ] 优化性能（React.memo、防抖）
- [ ] 检查内存泄漏
- [ ] 测试各种边界情况

**时间**: 6-8 小时  
**难度**: ⭐⭐⭐

#### Day 17: 测试
- [ ] 在多个网站测试文本选择
- [ ] 测试大量笔记的性能
- [ ] 测试 AI 不可用的情况
- [ ] 测试网络断开的情况
- [ ] 测试浏览器重启后的数据

**时间**: 4-6 小时  
**难度**: ⭐⭐

#### Day 18: 文档
- [ ] 编写 README.md
- [ ] 编写 ARCHITECTURE.md
- [ ] 编写使用指南
- [ ] 录制 Demo 视频
- [ ] 截图

**时间**: 4-6 小时  
**难度**: ⭐

---

## 技术难度排名

1. **Offscreen Document 实现** ⭐⭐⭐⭐⭐  
   - 需要理解 Manifest V3 限制
   - 需要理解消息传递机制
   - 需要处理 AI API 调用

2. **D3.js 思维导图** ⭐⭐⭐⭐⭐  
   - 需要理解力导向图原理
   - 需要处理复杂的交互
   - 需要优化性能

3. **Background Service Worker** ⭐⭐⭐⭐  
   - 需要理解异步消息传递
   - 需要处理存储逻辑
   - 需要协调多个组件

4. **Content Script** ⭐⭐⭐  
   - 需要处理 DOM 事件
   - 需要处理浮动元素定位
   - 需要避免与页面冲突

5. **Popup 和 SidePanel** ⭐⭐  
   - 常规的 React 开发
   - 主要是 UI 实现

---

## 面试时的讲解顺序

### 1. 开场（30秒）
"我开发了 WebMind，一个使用 Chrome 内置 AI 的智能笔记和思维导图扩展..."

### 2. 整体架构（1分钟）
"项目分为 5 个核心模块：Content Script、Background、Offscreen、Popup、SidePanel..."

### 3. 核心难点（2-3分钟）⭐重点
"最大的技术挑战是 Chrome Built-in AI 的调用，因为..."
- 讲清楚问题（AI 需要 DOM，Worker 没有 DOM）
- 讲清楚方案（Offscreen Document 代理）
- 讲清楚优化（复用、降级）

### 4. 思维导图（1-2分钟）⭐重点
"思维导图用 D3.js 实现，基于力导向布局..."
- 数据准备（关键词提取）
- 力的类型（4种力）
- 交互实现（拖拽、缩放）

### 5. 技术选型（1分钟）
"为什么选 Zustand、Vite、D3.js..."

### 6. 项目亮点（30秒）
"技术创新、架构设计、用户体验、工程质量、隐私保护"

---

## 关键代码片段（必须记住）

### 1. Offscreen Document 创建
```typescript
await chrome.offscreen.createDocument({
  url: 'background/offscreen.html',
  reasons: ['DOM_SCRAPING'],
  justification: '使用 Chrome Built-in AI 生成摘要'
});
```

### 2. AI 调用
```typescript
const summarizer = await window.ai.summarizer.create({
  type: 'tldr',
  format: 'plain-text',
  length: 'medium'
});
const summary = await summarizer.summarize(text);
```

### 3. D3 力导向图
```typescript
const simulation = d3.forceSimulation(nodes)
  .force('link', d3.forceLink(links).distance(150))
  .force('charge', d3.forceManyBody().strength(-500))
  .force('center', d3.forceCenter(width/2, height/2))
  .force('collision', d3.forceCollide().radius(60));
```

### 4. Zustand Store
```typescript
const useStore = create((set) => ({
  notes: [],
  loadNotes: async () => {
    const response = await chrome.runtime.sendMessage({ 
      type: MessageType.GET_NOTES 
    });
    set({ notes: response.notes });
  }
}));
```

---

## 常见面试问题速查

| 问题 | 关键点 | 时间 |
|------|--------|------|
| 为什么做这个项目？ | 实用需求 + 技术学习 | 30s |
| 最大的技术难点？ | Offscreen Document | 2-3min |
| 为什么选 D3.js？ | 灵活性、交互性 | 1min |
| 如何保证性能？ | 虚拟滚动、限制节点、防抖 | 1min |
| 如何保护隐私？ | 本地存储、无外部服务器 | 30s |
| 还有什么可以改进？ | 标签系统、编辑功能、测试 | 1-2min |

---

## 记忆口诀

**项目流程**：
> 选中文本 → 浮动按钮 → 调用AI → 保存笔记 → 思维导图

**开发顺序**：
> 基础 → 选择 → 路由 → AI(核心) → 弹窗 → 侧栏 → 导图(难) → 优化

**技术栈**：
> React + TS + Zustand + D3 + Vite + Chrome API

**核心难点**：
> Offscreen 代理 AI，D3 力导向图

**四种力**：
> 弹簧拉、电荷推、中心聚、碰撞散

---

## 最后检查清单

面试前一天：
- [ ] 完整运行项目一遍
- [ ] 讲解核心难点 3 遍（对着镜子）
- [ ] 画出架构图（在纸上）
- [ ] 准备 Demo 视频（录屏）
- [ ] 复习这份速查表

面试前 1 小时：
- [ ] 再运行一次项目
- [ ] 快速浏览速查表
- [ ] 深呼吸，保持自信

---

## 关键心态

1. **这是你的项目，你是专家**  
   不要妄自菲薄，AI、可视化、扩展开发都是热门技术

2. **重点是思路，不是记忆**  
   面试官关心的是你如何思考和解决问题

3. **诚实面对不足**  
   "这是个好问题，我之前没考虑到" > 胡编乱造

4. **展示学习能力**  
   "我是这样学习的..." > "我早就会了"

---

**记住**：好的项目不是没有缺陷，而是能清楚说明每个设计决策的理由！

祝你面试成功！🚀

